System.register("chunks:///main-menu/scripts/scenelist.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,i,n,a,s,c,o,l,u,f,p,d,v,h,y,_,b,m,g,P,C;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,f=e._decorator,p=e.Prefab,d=e.instantiate,v=e.Component}],execute:function(){u._RF.push({},"56ce0MAdDJH2qBewyMuTQnW","scenelist",void 0),g=f.ccclass,P=f.property,e("sceneArray",C=[]),e("SceneManager",(h=g("SceneManager"),y=P({type:p}),h((m=r((b=function(e){function t(){var e,r;n(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=a(this,(e=s(t)).call.apply(e,[this].concat(l))),c(r,"itemPrefab",m,o(r)),r}return i(t,e),l(t,[{key:"onLoad",value:function(){if(this.itemPrefab){C.sort((function(e,t){return e.indexOf("test")?-1:t.indexOf("test")?1:0}));for(var e=0;e<C.length;e++){var t=d(this.itemPrefab);this.node.addChild(t)}}}},{key:"start",value:function(){}}]),t}(v)).prototype,"itemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=b))||_)),u._RF.pop()}}}));

System.register("chunks:///main-menu/scripts/backbutton.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./scenelist.js"],(function(e,t){var n,o,c,s,l,i,u,r,a,d,_,f,p,v,h,k,I,y,g;return e({_dec:void 0,_class:void 0,_class2:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,o=e.classCallCheck,c=e.possibleConstructorReturn,s=e.getPrototypeOf,l=e.createClass},function(e){i=e.cclegacy,u=e._decorator,r=e.Vec3,a=e.game,d=e.ScrollViewComponent,_=e.director,f=e.LayoutComponent,p=e.Component},function(e){v=e.sceneArray}],execute:function(){i._RF.push({},"b20edYWY5pMo6v9nvpXwDsb","backbutton",void 0),g=u.ccclass,u.property,e("BackButton",(h=g("BackButton"),h((y=I=function(e){function t(){return o(this,t),c(this,s(t).apply(this,arguments))}return n(t,e),l(t,[{key:"__preload",value:function(){for(var e=a._sceneInfos,t=0,n=0,o="",c=0;c<e.length;c++)t=(o=e[c].url).lastIndexOf("/")+1,n=o.lastIndexOf(".scene"),"testlist"!==(o=o.substring(t,n))&&v.push(o)}},{key:"start",value:function(){a.addPersistRootNode(this.node),t._scrollNode=this.node.getParent().getChildByPath("Canvas/ScrollView"),t._scrollNode&&(t._scrollCom=t._scrollNode.getComponent(d)),t._blockInput=this.node.getChildByName("BlockInput"),t._blockInput.active=!1,t._prevNode=this.node.getChildByName("PrevButton"),t._nextNode=this.node.getChildByName("NextButton"),t._prevNode&&t._nextNode&&t.refreshButton()}},{key:"backToList",value:function(){t._blockInput.active=!0,_.loadScene("testlist",function(){t._sceneIndex=-1,t.refreshButton(),t._scrollNode=this.node.getParent().getChildByPath("Canvas/ScrollView"),t._scrollNode&&(t._scrollCom=t._scrollNode.getComponent(d),t._scrollCom._content.getComponent(f).updateLayout(),t._scrollCom.scrollToOffset(t.offset,.1,!0)),t._blockInput.active=!1}.bind(this))}},{key:"nextscene",value:function(){t._blockInput.active=!0,this.updateSceneIndex(!0),_.loadScene(this.getSceneName(),(function(){t._blockInput.active=!1}))}},{key:"prescene",value:function(){t._blockInput.active=!0,this.updateSceneIndex(!1),_.loadScene(this.getSceneName(),(function(){t._blockInput.active=!1}))}},{key:"updateSceneIndex",value:function(e){e?t._sceneIndex+1>=v.length?t._sceneIndex=0:t._sceneIndex+=1:t._sceneIndex-1<0?t._sceneIndex=v.length-1:t._sceneIndex-=1}},{key:"getSceneName",value:function(){return v[t._sceneIndex]}}],[{key:"saveOffset",value:function(){t._scrollNode&&(t._offset=new r(0,t._scrollCom.getScrollOffset().y,0))}},{key:"saveIndex",value:function(e){t._sceneIndex=e,t.refreshButton()}},{key:"refreshButton",value:function(){-1===t._sceneIndex?(t._prevNode.active=!1,t._nextNode.active=!1):(t._prevNode.active=!0,t._nextNode.active=!0)}},{key:"offset",get:function(){return t._offset},set:function(e){t._offset=e}}]),t}(p),I._scrollNode=null,I._offset=new r,I._scrollCom=null,I._sceneIndex=-1,k=y))||k)),i._RF.pop()}}}));

System.register("chunks:///main-menu/scripts/listitem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./scenelist.js","./backbutton.js"],(function(t,e){var n,i,s,o,a,l,c,r,u,h,d,p,m,f,b,v;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,i=t.classCallCheck,s=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.createClass},function(t){l=t.cclegacy,c=t._decorator,r=t.LabelComponent,u=t.ButtonComponent,h=t.director,d=t.Component},function(t){p=t.sceneArray},function(t){m=t.BackButton}],execute:function(){l._RF.push({},"dfb240gUk5FzLJW2+GbHJRv","listitem",void 0),v=c.ccclass,c.property,t("ListItem",(f=v("ListItem"),f(b=function(t){function e(){var t,n;i(this,e);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=s(this,(t=o(e)).call.apply(t,[this].concat(l)))).index=-1,n._name="",n.label=null,n.button=null,n}return n(e,t),a(e,[{key:"onload",value:function(){}},{key:"start",value:function(){this.index=this.node.getSiblingIndex(),this._name="",this.node&&(this.label=this.node.getComponentInChildren(r),this.button=this.node.getComponent(u)),this.updateItem(this.index,p[this.index])}},{key:"loadScene",value:function(){m.saveOffset(),m.saveIndex(this.index),this.button.interactable=!1,h.loadScene(this._name,m.refreshButton)}},{key:"updateItem",value:function(t,e){this.index=t,this._name=e,this.label.string=e}}]),e}(d))||b)),l._RF.pop()}}}));

System.register("chunks:///spline/src/utils/event.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,s,r,i;return{setters:[function(e){n=e.createClass,s=e.classCallCheck},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"491abee/xBL+a9q9tGmsGRU","event",void 0),i=function(){function e(){s(this,e),this._listeners=[]}return n(e,[{key:"addListener",value:function(e,t){for(var n=this._listeners,s=0;s<n.length;s++)if(n[s][0]===e&&n[s][1]===t)return;this._listeners.push([e,t])}},{key:"removeListener",value:function(e,t){for(var n=this._listeners,s=0;s<n.length;s++)if(n[s][0]===e)return void n.splice(s,1)}},{key:"invoke",value:function(e,t,n,s,r,i){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];for(var a=this._listeners,c=0;c<a.length;c++){var o=a[c];o[0].apply(o[1],l)}}}]),e}(),r._RF.pop(),e("default",i)}}}));

System.register("chunks:///spline/src/spline-node.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./utils/event.js"],(function(t,e){var i,o,r,n,s,c,p,l,u,a,h,_,y,d,f,g,b,v,O,C,D,k,w,m,P;return t({_dec:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inherits,r=t.classCallCheck,n=t.possibleConstructorReturn,s=t.getPrototypeOf,c=t.initializerDefineProperty,p=t.assertThisInitialized,l=t.createClass},function(t){u=t.cclegacy,a=t._decorator,h=t.Vec3,_=t.Vec2,y=t.Component},function(t){d=t.default}],execute:function(){u._RF.push({},"ea25fgiLE9K94BRKQOBQ6rg","spline-node",void 0),w=a.ccclass,m=a.property,f=w("SplineNode"),P=f((v=i((b=function(t){function e(){var t,i;r(this,e);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return(i=n(this,(t=s(e)).call.apply(t,[this].concat(l)))).changed=new d,c(i,"_position",v,p(i)),c(i,"_direction",O,p(i)),c(i,"_up",C,p(i)),c(i,"_scale",D,p(i)),c(i,"_roll",k,p(i)),i}return o(e,t),l(e,[{key:"position",get:function(){return this._position},set:function(t){!CC_EDITOR&&this._position.equals(t)||(this._position.set(t),this.changed.invoke(this))}},{key:"direction",get:function(){return this._direction},set:function(t){!CC_EDITOR&&this._direction.equals(t)||(this._direction.set(t),this.changed.invoke(this))}},{key:"invDirection",get:function(){return this.position.clone().multiplyScalar(2).subtract(this.direction)},set:function(t){this.direction=this.position.clone().multiplyScalar(2).subtract(t)}},{key:"up",get:function(){return this._up},set:function(t){!CC_EDITOR&&this._up.equals(t)||(this._up.set(t),this.changed.invoke(this))}},{key:"scale",get:function(){return this._scale},set:function(t){!CC_EDITOR&&this._scale.equals(t)||(this._scale.set(t),this.changed.invoke(this))}},{key:"roll",get:function(){return this._roll},set:function(t){(CC_EDITOR||this._roll!==t)&&(this._roll=t,this.changed.invoke(this))}}]),e}(y)).prototype,"_position",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.v3()}}),i(b.prototype,"position",[m],Object.getOwnPropertyDescriptor(b.prototype,"position"),b.prototype),O=i(b.prototype,"_direction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.v3()}}),i(b.prototype,"direction",[m],Object.getOwnPropertyDescriptor(b.prototype,"direction"),b.prototype),C=i(b.prototype,"_up",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.UP.clone()}}),i(b.prototype,"up",[m],Object.getOwnPropertyDescriptor(b.prototype,"up"),b.prototype),D=i(b.prototype,"_scale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.ONE.clone()}}),i(b.prototype,"scale",[m],Object.getOwnPropertyDescriptor(b.prototype,"scale"),b.prototype),k=i(b.prototype,"_roll",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i(b.prototype,"roll",[m],Object.getOwnPropertyDescriptor(b.prototype,"roll"),b.prototype),g=b))||g,u._RF.pop(),t("default",P)}}}));

System.register("chunks:///spline/src/utils/mathf.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,n){var e,i,r,s,u,o,c,l;function a(t,n,e){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.x-n.x,u=e.z-n.z,l=s*s+u*u,a=((t.x-n.x)*s+(t.z-n.z)*u)/l;return i=r?l?a<0?n:a>1?e:o.set(n.x+a*s,0,n.z+a*u):n:o.set(n.x+a*s,0,n.z+a*u),s=t.x-i.x,u=t.z-i.z,c.dist=Math.sqrt(s*s+u*u),c.t=a,c}return t({pointInPolygonAreaXZ:function(t,n){for(var e=!1,i=t.x,r=t.z,s=n.length,u=0,o=s-1;u<s;o=u++){var c=n[u].x,l=n[u].z,a=n[o].x,f=n[o].z;l>r!=f>r&&i<(a-c)*(r-l)/(f-l)+c&&(e=!e)}return e},pointInPolygonLineXZ:function(t,n,e){for(var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=1,s=n.length;r<s;r++){var u=a(t,n[r-1],n[r],!0);if(u.dist<e){if(i)return!0;if(u.t>=0&&u.t<=1)return!0}}return!1},pointLineDistanceXZ:a,pointPolygonMinDistXZ:function(t,n){l.dist=Number.MAX_SAFE_INTEGER;for(var e=1;e<n.length;e++){var i=a(t,n[e-1],n[e],!0);i.dist<l.dist&&(l.dist=i.dist,l.index=e,l.t=i.t)}return l}}),{setters:[function(t){e=t.createClass,i=t.classCallCheck},function(t){r=t.cclegacy,s=t.Vec3}],execute:function(){r._RF.push({},"c7eb5bTTC1Ic58WBxykaEs8","mathf",void 0),u=function(){function t(){i(this,t)}return e(t,null,[{key:"lerp",value:function(t,n,e){return t+(n-t)*e}}]),t}(),o=new s,c={dist:0,t:0},l={dist:0,index:0,t:0},r._RF.pop(),t("default",u)}}}));

System.register("chunks:///spline/src/utils/pool.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var c,n,o,u,s,l,i,r,a,p;return{setters:[function(e){c=e.createClass,n=e.classCallCheck},function(e){o=e.Vec2,u=e.Vec3,s=e.Vec4,l=e.Quat,i=e.Mat4,r=e.cclegacy}],execute:function(){r._RF.push({},"909c3539B9HBIjKNpHsQPLH","pool",void 0),e("Pool",a=function(){function e(t){n(this,e),this._pool=[],this._ctor=null,this._ctor=t}return c(e,[{key:"get",value:function(){var e=this._pool.pop();return e||(e=new this._ctor),e}},{key:"put",value:function(e){this._pool.push(e)}}]),e}()),p={Vec2:new a(o),Vec3:new a(u),Vec4:new a(s),Quat:new a(l),Mat4:new a(i)},r._RF.pop(),e("default",p)}}}));

System.register("chunks:///spline/src/utils/mesh-processing/mesh-vertex.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","../pool.js"],(function(e,t){var i,n,r,o,s,u,a,l,c,p,h,v,f,d,_,b,g,m,y,w,R;return e({_dec:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.createClass,r=e.classCallCheck,o=e.initializerDefineProperty},function(e){s=e.cclegacy,u=e._decorator,a=e.Vec3,l=e.Vec4,c=e.Vec2},function(e){p=e.Pool}],execute:function(){s._RF.push({},"a0f00WqATFBO554BJ62A8gf","mesh-vertex",void 0),y=u.ccclass,w=u.property,h=y("MeshVertex"),R=h((d=i((f=function(){function e(){r(this,e),o(this,"position",d,this),o(this,"normal",_,this),o(this,"tangent",b,this),o(this,"uv",g,this),o(this,"uv1",m,this)}return n(e,[{key:"set",value:function(t,i,n,r,o){if(t instanceof e){var s=t;this.position.set(s.position),this.normal.set(s.normal),this.uv.set(s.uv),this.uv1.set(s.uv1),this.tangent.set(s.tangent)}else this.position.set(t||a.ZERO),this.normal.set(i||a.ZERO),this.uv.set(n||c.ZERO),this.uv1.set(o||c.ZERO),this.tangent.set(r||l.ZERO);return this}}],[{key:"create",value:function(t,i,n,r,o){var s=new e;return s.set(t,i,n,r,o),s}},{key:"pool",get:function(){return this._pool||(this._pool=new p(e)),this._pool}}]),e}()).prototype,"position",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),_=i(f.prototype,"normal",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),b=i(f.prototype,"tangent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),g=i(f.prototype,"uv",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),m=i(f.prototype,"uv1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),v=f))||v,s._RF.pop(),e("default",R)}}}));

System.register("chunks:///spline/src/curve-sample.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./utils/mathf.js","./utils/pool.js","./utils/mesh-processing/mesh-vertex.js"],(function(t,e){var n,s,i,o,r,a,u,l,c,p,h,f,m,g;return{setters:[function(t){n=t.createClass,s=t.classCallCheck},function(t){i=t.cclegacy,o=t.Quat,r=t.Vec3,a=t.Vec2},function(t){u=t.default},function(t){l=t.default,c=t.Pool},function(t){p=t.default}],execute:function(){i._RF.push({},"e97a3DFPW5DtprWvZMLUB55","curve-sample",void 0),h=cc.v3(0,0,1),f=Math.PI/180,m=o.fromEuler(new o,0,-90,0),g=function(){function t(){s(this,t),this.location=new r,this.tangent=new r,this.up=new r,this.scale=new a}return n(t,[{key:"set",value:function(t,e,n,s,i,o,r){return this.location.set(t),this.tangent.set(e),this.up.set(n),this.scale.set(s),this.roll=i,this.distanceInCurve=o,this.timeInCurve=r,this._transformedUp&&(l.Vec3.put(this._transformedUp),this._transformedUp=null),this._rotation&&(l.Quat.put(this._rotation),this._rotation=null),this._bentRotation&&(l.Quat.put(this._bentRotation),this._bentRotation=null),this}},{key:"getBent",value:function(t,e){e?e!==t&&e.set(t):e=p.create(t);var n=l.Vec3.get();r.multiply(e.position,e.position,n.set(0,this.scale.y,this.scale.x)),l.Vec3.put(n);var s=l.Quat.get();return o.fromAxisAngle(s,r.RIGHT,this.roll*f),r.transformQuat(e.position,e.position,s),r.transformQuat(e.normal,e.normal,s),r.transformQuat(e.tangent,e.tangent,s),l.Quat.put(s),e.position.x=0,s=this.bentRotation,r.transformQuat(e.position,e.position,s),e.position.add(this.location),r.transformQuat(e.normal,e.normal,s),r.transformQuat(e.tangent,e.tangent,s),e}},{key:"transformedUp",get:function(){if(!this._transformedUp){var t=l.Quat.get(),e=l.Vec3.get();o.fromAxisAngle(t,h,this.roll*f),r.transformQuat(e,this.up,t),this._transformedUp=r.cross(new r,this.tangent,r.cross(e,e,this.tangent).normalize()),l.Quat.put(t),l.Vec3.put(e)}return this._transformedUp}},{key:"rotation",get:function(){return this._rotation||(this._rotation=o.fromViewUp(new o,this.tangent,this.transformedUp)),this._rotation}},{key:"bentRotation",get:function(){if(!this._bentRotation){var t=l.Vec3.get(),e=l.Vec3.get();t.set(this.tangent),e.set(this.up),Math.abs(r.dot(t,this.up)-1)<.01&&(t.x+=.01,t.normalize()),r.cross(e,t,e).normalize(),r.cross(e,e,t);var n=new o;o.fromViewUp(n,t,e),this._bentRotation=o.multiply(n,n,m),l.Vec3.put(t),l.Vec3.put(e)}return this._bentRotation}}],[{key:"create",value:function(e,n,s,i,o,r,a){return(new t).set(e,n,s,i,o,r,a)}},{key:"lerp",value:function(e,n,s,i){var o=l.Vec3.get(),c=l.Vec3.get(),p=l.Vec3.get(),h=l.Vec2.get();return(i=i||new t).set(r.lerp(o,e.location,n.location,s),r.lerp(c,e.tangent,n.tangent,s).normalize(),r.lerp(p,e.up,n.up,s),a.lerp(h,e.scale,n.scale,s),u.lerp(e.roll,n.roll,s),u.lerp(e.distanceInCurve,n.distanceInCurve,s),u.lerp(e.timeInCurve,n.timeInCurve,s)),l.Vec3.put(o),l.Vec3.put(c),l.Vec3.put(p),l.Vec2.put(h),i}},{key:"pool",get:function(){return this._pool||(this._pool=new c(t)),this._pool}}]),t}(),i._RF.pop(),t("default",g)}}}));

System.register("chunks:///spline/src/cubic-bezier-curve.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./utils/event.js","./utils/mathf.js","./utils/pool.js","./curve-sample.js"],(function(t,e){var n,i,s,a,l,u,r,c,o;return{setters:[function(t){n=t.createClass,i=t.classCallCheck},function(t){s=t.cclegacy,a=t.Vec3},function(t){l=t.default},function(t){u=t.default},function(t){r=t.default},function(t){c=t.default}],execute:function(){s._RF.push({},"5325fLfN2hCK5YSAMQE0ffY","cubic-bezier-curve",void 0),30,1/30,o=function(){function t(e,n){i(this,t),this.samples=[],this.changed=new l,this.length=0,this._gizmoEditing=!1,this._points=[],this._minPos=new a,this._maxPos=new a,this.n1=e,this.n2=n,this.computeSamples=this.computeSamples.bind(this),e.changed.addListener(this.computeSamples),n.changed.addListener(this.computeSamples),this.computeSamples()}return n(t,[{key:"gizmoEditing",get:function(){return this._gizmoEditing},set:function(t){this._gizmoEditing=t}}]),n(t,[{key:"connectStart",value:function(t){this.n1.changed.removeListener(this.computeSamples),this.n1=t,t.changed.addListener(this.computeSamples),this.computeSamples()}},{key:"connectEnd",value:function(t){this.n2.changed.removeListener(this.computeSamples),this.n2=t,t.changed.addListener(this.computeSamples),this.computeSamples()}},{key:"getInverseDirection",value:function(t){return(t=t||new a).set(this.n2.position).multiplyScalar(2).subtract(this.n2.direction)}},{key:"getLocation",value:function(t,e){e=e||new a;var n=1-t,i=n*n,s=t*t,l=r.Vec3.get(),u=r.Vec3.get(),c=r.Vec3.get();return e.set(this.n1.position).multiplyScalar(i*n),e.add(l.set(this.n1.direction).multiplyScalar(3*i*t)),e.add(this.getInverseDirection(c).multiplyScalar(3*n*s)),e.add(u.set(this.n2.position).multiplyScalar(s*t)),r.Vec3.put(l),r.Vec3.put(u),r.Vec3.put(c),e}},{key:"getTangent",value:function(t,e){e=e||new a;var n=1-t,i=n*n,s=t*t;return new a(this.n1.position).multiplyScalar(-i).add(new a(this.n1.direction).multiplyScalar(3*i-2*n)).add(this.getInverseDirection().multiplyScalar(-3*s+2*t)).add(new a(this.n2.position).multiplyScalar(s)).normalize()}},{key:"getUp",value:function(t){return this.n1.up.clone().lerp(this.n2.up,t)}},{key:"getScale",value:function(t){return this.n1.scale.clone().lerp(this.n2.scale,t)}},{key:"getRoll",value:function(t){return u.lerp(this.n1.roll,this.n2.roll,t)}},{key:"getSamples",value:function(){return this.samples}},{key:"computeSamples",value:function(){var t=this.samples;t.length=31,this.length=0;for(var e=this.getLocation(0),n=0;n<=30;n++){var i=n*(1/30),s=this.getLocation(i);this.length+=a.distance(e,s),e=s,t[n]||(t[n]=new c),this.updateSample(t[n],this.length,i)}this._points.length=0,CC_EDITOR&&this._gizmoEditing||this.changed.invoke()}},{key:"updateSample",value:function(t,e,n){return t.set(this.getLocation(n),this.getTangent(n),this.getUp(n),this.getScale(n),this.getRoll(n),e,n)}},{key:"getSample",value:function(t,e){!function(t){if(t<0||t>1)throw new Error("Time must be between 0 and 1 (was "+t+").")}(t);for(var n=this.samples,i=n[0],s=null,a=0;a<n.length;a++){var l=n[a];if(l.timeInCurve>=t){s=l;break}i=l}if(null==s)throw new Error("Can't find curve samples.");var u=s==i?0:(t-i.timeInCurve)/(s.timeInCurve-i.timeInCurve);return c.lerp(i,s,u,e)}},{key:"getSampleAtDistance",value:function(t,e){if(t<0||t>this.length)throw new Error("Distance must be positive and less than curve length. Length = "+this.length+", given distance was "+t);0===t?t=.001:t===this.length&&(t=this.length-.001);for(var n=this.samples,i=n[0],s=null,a=0;a<n.length;a++){var l=n[a];if(l.distanceInCurve>=t){s=l;break}i=l}if(null==s)throw new Error("Can't find curve samples.");var u=s==i?0:(t-i.distanceInCurve)/(s.distanceInCurve-i.distanceInCurve);return c.lerp(i,s,u,e)}},{key:"getPoints",value:function(){return 0===this._points.length&&this._caclBoundingBox(),this._points}},{key:"getBounding",value:function(t,e){0===this._points.length&&this._caclBoundingBox(),t.set(this._minPos),e.set(this._maxPos)}},{key:"_caclBoundingBox",value:function(){for(var t=this._points,e=this._minPos.set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),n=this._maxPos.set(-Number.MAX_SAFE_INTEGER,-Number.MAX_SAFE_INTEGER,-Number.MAX_SAFE_INTEGER),i=this.getSamples(),s=0;s<i.length;s++){var a=t[s]=i[s].location;e.x=Math.min(e.x,a.x),e.y=Math.min(e.y,a.y),e.z=Math.min(e.z,a.z),n.x=Math.max(n.x,a.x),n.y=Math.max(n.y,a.y),n.z=Math.max(n.z,a.z)}t.length=i.length}}]),t}(),s._RF.pop(),t("default",o)}}}));

System.register("chunks:///spline/src/spline-node-wrapper.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./spline-node.js"],(function(e,t){var o,r,n,i,p,c,s,d,l,u,y,a,f,h,g,v,_,O,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_temp:void 0}),{setters:[function(e){o=e.applyDecoratedDescriptor,r=e.createClass,n=e.classCallCheck},function(e){i=e.cclegacy,p=e._decorator,c=e.Vec3,s=e.Vec2},function(e){d=e.default}],execute:function(){i._RF.push({},"04ae8GydjtEIptiC5odtVpt","spline-node-wrapper",void 0),v=p.ccclass,_=p.property,O=p.type,l=v("SplineNodeWrapper"),u=O(d),y=O(c),a=O(c),f=O(s),j=l((o((g=function(){function e(){n(this,e),this.node=null}return r(e,[{key:"splineNode",get:function(){return this.node}},{key:"position",get:function(){return this.node.position},set:function(e){this.node.position=e}},{key:"direction",get:function(){return this.node.direction},set:function(e){this.node.direction=e}},{key:"scale",get:function(){return this.node.scale},set:function(e){this.node.scale=e}},{key:"roll",get:function(){return this.node.roll},set:function(e){this.node.roll=e}}],[{key:"create",value:function(t){var o=new e;return o.node=t,o}}]),e}()).prototype,"splineNode",[u],Object.getOwnPropertyDescriptor(g.prototype,"splineNode"),g.prototype),o(g.prototype,"position",[y],Object.getOwnPropertyDescriptor(g.prototype,"position"),g.prototype),o(g.prototype,"direction",[a],Object.getOwnPropertyDescriptor(g.prototype,"direction"),g.prototype),o(g.prototype,"scale",[f],Object.getOwnPropertyDescriptor(g.prototype,"scale"),g.prototype),o(g.prototype,"roll",[_],Object.getOwnPropertyDescriptor(g.prototype,"roll"),g.prototype),h=g))||h,i._RF.pop(),e("default",j)}}}));

System.register("chunks:///spline/src/spline.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./utils/event.js","./spline-node.js","./cubic-bezier-curve.js","./spline-node-wrapper.js"],(function(e,t){var n,i,o,s,d,r,a,h,l,c,u,p,g,v,_,N,f,y,S,m,C,k,A,L,E,w,b,x;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,s=e.possibleConstructorReturn,d=e.getPrototypeOf,r=e.initializerDefineProperty,a=e.assertThisInitialized,h=e.createClass},function(e){l=e.cclegacy,c=e._decorator,u=e.Vec3,p=e.Node,g=e.find,v=e.Component},function(e){_=e.default},function(e){N=e.default},function(e){f=e.default},function(e){y=e.default}],execute:function(){l._RF.push({},"4f3betNZrFAk5ghozl0TFWc","spline",void 0),L=c.ccclass,E=c.type,w=c.boolean,c.integer,c.float,b=c.executeInEditMode,"__spline_node_root__",S=E([N]),m=E(y),x=L(C=b((n((k=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,h=new Array(i),l=0;l<i;l++)h[l]=arguments[l];return(n=s(this,(e=d(t)).call.apply(e,[this].concat(h)))).currentSelection=null,n._addSplineNodeAtLast=!1,n._addSplineNodeAfterSelection=!1,n._deleteSelectSplineNode=!1,r(n,"_nodes",A,a(n)),n.curves=[],n.length=0,n._isLoop=!1,n._gizmoEditing=!1,n.nodeListChanged=new _,n.curveChanged=new _,n._updatingNodes=!1,n._samples=[],n._points=[],n._minPos=new u,n._maxPos=new u,n}return i(t,e),h(t,[{key:"invokeNodeListChanged",value:function(){CC_EDITOR&&this._gizmoEditing||this.nodeListChanged.invoke()}},{key:"invokeCurveChanged",value:function(){CC_EDITOR&&this._gizmoEditing||this.curveChanged.invoke()}},{key:"onLoad",value:function(){this._updateNodes()}},{key:"onEnable",value:function(){}},{key:"onDisable",value:function(){}},{key:"addNode",value:function(e,t,n,i,o){var s=new p("SplineNode"),d=s.addComponent(N);return d.position=e,d.direction=t,void 0!==n&&(d.up=n),void 0!==i&&(d.scale=i),void 0!==o&&(d.roll=o),s.parent=this._nodeRoot,this._nodes.push(d),this._updatingNodes||(this.invokeNodeListChanged(),this._createCurves()),d}},{key:"insertNode",value:function(e,t,n){var i=new p("SplineNode"),o=i.addComponent(N);return o.position=e,o.direction=t,this._nodeRoot.insertChild(i,n),this._nodes.splice(n,0,o),this._updatingNodes||(this.invokeNodeListChanged(),this._createCurves()),o}},{key:"removeNode",value:function(e){var t=this._nodes[e];return this._nodeRoot.removeChild(t.node),this._nodes.splice(e,1),this._updatingNodes||(this.invokeNodeListChanged(),this._createCurves()),t}},{key:"_updateNodes",value:function(){this._updatingNodes=!0;var e=this._nodeRoot=g("__spline_node_root__",this.node);if(e)this._nodes=e.getComponentsInChildren(N);else{if(e=this._nodeRoot=new p("__spline_node_root__"),this._nodes.length){var t=this._nodes.slice();this._nodes.length=0;for(var n=0;n<t.length;n++){var i=t[n];this.addNode(i.position,i.direction,i.up,i.scale,i.roll)}}else this.addNode(cc.v3(-5,0,0),cc.v3(-5,0,-3)),this.addNode(cc.v3(5,0,0),cc.v3(5,0,3));e.parent=this.node}this._createCurves(),this.invokeNodeListChanged(),this._updatingNodes=!1}},{key:"_createCurves",value:function(){this.curves.length=0;for(var e=0;e<this.nodes.length-1;e++){var t=this.nodes[e],n=this.nodes[e+1],i=new f(t,n);i.changed.addListener(this.updateAfterCurveChanged,this),this.curves.push(i)}this.invokeNodeListChanged(),this.updateAfterCurveChanged()}},{key:"getCurves",value:function(){return this.curves}},{key:"updateAfterCurveChanged",value:function(){this.length=0;for(var e=0;e<this.curves.length;e++){var t=this.curves[e];this.length+=t.length}this.invokeCurveChanged(),this._points.length=0,this._samples.length=0}},{key:"getSample",value:function(e,t){var n=this.getNodeIndexForTime(e);return this.curves[n].getSample(e-n,t)}},{key:"getCurve",value:function(e){return this.curves[this.getNodeIndexForTime(e)]}},{key:"getNodeIndexForTime",value:function(e){if(e<0||e>this.nodes.length-1)throw new Error("Time must be between 0 and last node index (".concat(this.nodes.length-1,"). Given time was {").concat(e,"}."));var t=Math.floor(e);return t==this.nodes.length-1&&t--,t}},{key:"getSampleAtDistance",value:function(e,t){if(e<0||e>this.length)throw new Error("Distance must be between 0 and spline length (".concat(this.length,"). Given distance was ").concat(e,"."));for(var n=0;n<this.curves.length;n++){var i=this.curves[n];if(e>i.length&&e<i.length+1e-4&&(e=i.length),!(e>i.length))return i.getSampleAtDistance(e,t);e-=i.length}throw new Error("Something went wrong with GetSampleAtDistance.")}},{key:"updateLoopBinding",value:function(){this.startNode&&this.startNode.changed.removeListener(this.startNodeChanged),null!=this.endNode&&this.endNode.changed.removeListener(this.endNodeChanged),this.isLoop?(this.startNode=this.nodes[0],this.endNode=this.nodes[this.nodes.length-1],this.startNode.changed.addListener(this.startNodeChanged),this.endNode.changed.addListener(this.endNodeChanged),this.startNodeChanged()):(this.startNode=null,this.endNode=null)}},{key:"startNodeChanged",value:function(){var e=this.startNode,t=this.endNode;t.changed.removeListener(this.endNodeChanged),t.position=e.position,t.direction=e.direction,t.roll=e.roll,t.scale=e.scale,t.up=e.up,t.changed.addListener(this.endNodeChanged)}},{key:"endNodeChanged",value:function(){var e=this.startNode,t=this.endNode;e.changed.removeListener(this.startNodeChanged),e.position=t.position,e.direction=t.direction,e.roll=t.roll,e.scale=t.scale,e.up=t.up,e.changed.addListener(this.startNodeChanged)}},{key:"getSamples",value:function(){if(0===this._samples.length)for(var e=this._samples,t=this.curves,n=0;n<t.length;n++)for(var i=t[n].getSamples(),o=0;o<i.length;o++)e.push(i[o]);return this._samples}},{key:"getPoints",value:function(){return 0===this._points.length&&this._caclBoundingBox(),this._points}},{key:"getBounding",value:function(e,t){0===this._points.length&&this._caclBoundingBox(),e.set(this._minPos),t.set(this._maxPos)}},{key:"_caclBoundingBox",value:function(){for(var e=this._points,t=this._minPos.set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),n=this._maxPos.set(-Number.MAX_SAFE_INTEGER,-Number.MAX_SAFE_INTEGER,-Number.MAX_SAFE_INTEGER),i=this.getSamples(),o=0;o<i.length;o++){var s=e[o]=i[o].location;t.x=Math.min(t.x,s.x),t.y=Math.min(t.y,s.y),t.z=Math.min(t.z,s.z),n.x=Math.max(n.x,s.x),n.y=Math.max(n.y,s.y),n.z=Math.max(n.z,s.z)}e.length=i.length}},{key:"addSplineNodeAtLast",get:function(){return this._addSplineNodeAtLast},set:function(e){if(this._addSplineNodeAtLast!==e){this._addSplineNodeAtLast=e;var t=this.nodes.length-1,n=this.nodes[t],i=this.getSample(t).tangent.clone().multiplyScalar(this.length/this.nodes.length/2);this.addNode(i.add(n.position),n.direction)}}},{key:"addSplineNodeAfterSelection",get:function(){return this._addSplineNodeAfterSelection},set:function(e){if(this._addSplineNodeAfterSelection!==e)if(this._addSplineNodeAfterSelection=e,this.currentSelection){var t=this.nodes.indexOf(this.currentSelection);if(-1!==t){var n=this.getSample(t).tangent.clone().multiplyScalar(this.length/this.nodes.length/2);this.insertNode(n.add(this.currentSelection.position),this.currentSelection.direction,t+1)}}else cc.warn("No SpineNode selected.")}},{key:"deleteSelectSplineNode",get:function(){return this._deleteSelectSplineNode},set:function(e){if(this._deleteSelectSplineNode!==e)if(this._deleteSelectSplineNode=e,this.currentSelection){var t=this.nodes.indexOf(this.currentSelection);-1!==t&&this.removeNode(t)}else cc.warn("No SpineNode selected.")}},{key:"nodes",get:function(){return this._nodes}},{key:"splineNodes",get:function(){return this._nodes.map((function(e){return y.create(e)}))},set:function(e){}},{key:"isLoop",get:function(){return this._isLoop},set:function(e){this._isLoop=e,this.updateLoopBinding()}},{key:"gizmoEditing",get:function(){return this._gizmoEditing},set:function(e){this._gizmoEditing=e;for(var t=0;t<this.curves.length;t++)this.curves[t].gizmoEditing=e}}]),t}(v)).prototype,"addSplineNodeAtLast",[w],Object.getOwnPropertyDescriptor(k.prototype,"addSplineNodeAtLast"),k.prototype),n(k.prototype,"addSplineNodeAfterSelection",[w],Object.getOwnPropertyDescriptor(k.prototype,"addSplineNodeAfterSelection"),k.prototype),n(k.prototype,"deleteSelectSplineNode",[w],Object.getOwnPropertyDescriptor(k.prototype,"deleteSelectSplineNode"),k.prototype),A=n(k.prototype,"_nodes",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),n(k.prototype,"splineNodes",[m],Object.getOwnPropertyDescriptor(k.prototype,"splineNodes"),k.prototype),n(k.prototype,"isLoop",[w],Object.getOwnPropertyDescriptor(k.prototype,"isLoop"),k.prototype),C=k))||C)||C,l._RF.pop(),e("default",x)}}}));

System.register("chunks:///spline/src/comps/spline-util-base.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../spline-node.js","../spline.js"],(function(e,t){var n,s,i,l,o,r,p,u,c,a,h,d,_,f,v,g,y,C;return e({_dec:void 0,_class:void 0,_class2:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,s=e.inherits,i=e.classCallCheck,l=e.possibleConstructorReturn,o=e.getPrototypeOf,r=e.createClass},function(e){p=e.cclegacy,u=e._decorator,c=e.Component},function(e){a=e.default},function(e){h=e.default}],execute:function(){p._RF.push({},"6eeeaOuhfFI3o1us6WtGstr","spline-util-base",void 0),v=u.ccclass,g=u.executeInEditMode,y=u.type,d=y(h),C=v(_=g((n((f=function(e){function t(){var e,n;i(this,t);for(var s=arguments.length,r=new Array(s),p=0;p<s;p++)r[p]=arguments[p];return(n=l(this,(e=o(t)).call.apply(e,[this].concat(r))))._spline=null,n._splineNode=null,n._splineCurve=null,n}return s(t,e),r(t,[{key:"spline",get:function(){if(!this._spline)for(var e=this.node;e&&(this._spline=e.getComponent(h),!this._spline);)e=e.parent;return this._spline}},{key:"splineNode",get:function(){if(!this._splineNode)for(var e=this.node;e&&(this._splineNode=e.getComponent(a),!this._splineNode);)e=e.parent;return this._splineNode}},{key:"splineCurve",get:function(){if(!this._splineCurve){var e=this.splineNode;if(e){var t=e.node.getSiblingIndex();this._splineCurve=this.spline.getCurve(t)}else this._splineCurve=this.spline}return this._splineCurve}}]),t}(c)).prototype,"spline",[d],Object.getOwnPropertyDescriptor(f.prototype,"spline"),f.prototype),_=f))||_)||_,p._RF.pop(),e("default",C)}}}));

System.register("chunks:///spline/src/comps/spline-util-renderer.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","./spline-util-base.js"],(function(e,t){var i,n,s,r,a,h,o,d,l,u,c,p,g,y,v,_,f,C,k,w,M;return e({_dec:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,s=e.classCallCheck,r=e.possibleConstructorReturn,a=e.getPrototypeOf,h=e.initializerDefineProperty,o=e.assertThisInitialized,d=e.createClass},function(e){l=e.cclegacy,u=e._decorator,c=e.Mat4,p=e.Node,g=e.PrivateNode},function(e){y=e.default}],execute:function(){l._RF.push({},"c7ffansbHtO8oeW7zNMMVAH","spline-util-renderer",void 0),k=u.ccclass,w=u.property,0,v=k(M),M=v((C=i((f=function(e){function t(){var e,i;s(this,t);for(var n=arguments.length,d=new Array(n),l=0;l<n;l++)d[l]=arguments[l];return i=r(this,(e=a(t)).call.apply(e,[this].concat(d))),h(i,"_showGenerated",C,o(i)),i._generated=null,i._dirty=!0,i._dirtyTime=0,i.dirtyWhenSplineMoved=!1,i.splineMatrix=null,i}return n(t,e),d(t,[{key:"_onDirtyChanged",value:function(e){e&&!this._dirty&&(this._dirtyTime=0),this._dirty=e}},{key:"onLoad",value:function(){this.onCurveChanged()}},{key:"onEnable",value:function(){this.spline&&(this.onCurveChanged&&this.spline.curveChanged.addListener(this.onCurveChanged,this),this.onNodeListChanged&&this.spline.nodeListChanged.addListener(this.onNodeListChanged,this)),this.generated&&(this.generated.active=!0)}},{key:"onDisable",value:function(){this.spline&&(this.onCurveChanged&&this.spline.curveChanged.removeListener(this.onCurveChanged,this),this.onNodeListChanged&&this.spline.curveChanged.removeListener(this.onNodeListChanged,this)),this.generated&&(this.generated.active=!1)}},{key:"onCurveChanged",value:function(){this.dirty=!0}},{key:"checkSplineMoved",value:function(){if(this.dirtyWhenSplineMoved){var e=this.spline.node.worldMatrix;this.splineMatrix?this.splineMatrix.equals(e)||(this.dirty=!0):this.splineMatrix=new c,this.splineMatrix.set(e)}}},{key:"reset",value:function(){this._generated&&(this._generated.parent=null,this._generated=null),this.onCurveChanged()}},{key:"update",value:function(e){this.checkSplineMoved(),this.dirty&&this.spline&&(this._dirtyTime+=e,this._dirtyTime>=0&&(this.compute(),this.dirty=!1),CC_EDITOR&&cce.Engine.repaintInEditMode())}},{key:"compute",value:function(){}},{key:"showGenerated",get:function(){return this._showGenerated},set:function(e){this._showGenerated=e,this.reset()}},{key:"generated",get:function(){if(!this._generated||this._generated.parent!==this.node){this._generated&&(this._generated.parent=null);var e="generated "+cc.js.getClassName(this);this._generated=cc.find(e,this.node),this._generated||(this._showGenerated?this._generated=new p(e):this._generated=new g(e),this._generated.parent=this.node)}return this._generated}},{key:"dirty",get:function(){return this._dirty},set:function(e){this._onDirtyChanged(e)}}]),t}(y)).prototype,"_showGenerated",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i(f.prototype,"showGenerated",[w],Object.getOwnPropertyDescriptor(f.prototype,"showGenerated"),f.prototype),_=f))||_,l._RF.pop(),e("default",M)}}}));

System.register("chunks:///road-tool/src/road-tool.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../spline/src/comps/spline-util-renderer.js"],(function(o,t){var e,r,s,c,n,l,i,u,a,p;return o({_dec:void 0,_class:void 0}),{setters:[function(o){e=o.inherits,r=o.classCallCheck,s=o.possibleConstructorReturn,c=o.getPrototypeOf},function(o){n=o.cclegacy,l=o._decorator},function(o){i=o.default}],execute:function(){n._RF.push({},"8109b5w01xGtpC2+WLkO4R6","road-tool",void 0),p=l.ccclass,l.property,o("RoadTool",(u=p("RoadTool"),u(a=function(o){function t(){return r(this,t),s(this,c(t).apply(this,arguments))}return e(t,o),t}(i))||a)),n._RF.pop()}}}));

System.register("chunks:///shader-lib/post-process/editor/post-process-renderer-materials.js",["cc"],(function(e,r){var t,n,o,s,c,i,a,u,d,l,p,f,m;return{setters:[function(e){t=e.cclegacy,n=e.game,o=e.Game,s=e.AssetLibrary}],execute:function(){if(t._RF.push({},"c9497JPexdIBagaxckT4gsC","post-process-renderer-materials",void 0),c=new Map,CC_EDITOR)for(i=window.require("globby"),a=window.require("path"),u=window.require("fs-extra"),d=require("electron"),l=d.remote.getGlobal("Editor").Project.path,p=i.sync(a.join(l,"**/post-process/**/*.mtl")),f=function(e){var r=p[e],t=a.basename(r).replace(a.extname(r),""),i=r+".meta";if(!u.existsSync(i))return"continue";var d=void 0;try{d=u.readJSONSync(i)}catch(e){cc.error(e)}if(!d)return"continue";c.set(t,null);var l=d.uuid;n.on(o.EVENT_ENGINE_INITED,(function(){s.loadAsset(l,(function(e,r){e?cc.error(e):c.set(t,r)}))}))},m=0;m<p.length;m++)f(m);t._RF.pop(),e("default",c)}}}));

System.register("chunks:///shader-lib/post-process/post-process-command.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(s,t){var c,e,n;return{setters:[function(s){c=s.classCallCheck},function(s){e=s.cclegacy}],execute:function(){e._RF.push({},"2050cxbcQRA/LTZ3IsRhCS4","post-process-command",void 0),n=function s(t){c(this,s),this.pass=null,this.inputCommands=[],this.outputName="",this.pass=t},e._RF.pop(),s("default",n)}}}));

System.register("chunks:///shader-lib/post-process/post-process-flow.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var s,o,r,c,n,i,l,u,p,a,d,f;return e({_dec:void 0,_class:void 0}),{setters:[function(e){s=e.inherits,o=e.createClass,r=e.classCallCheck,c=e.possibleConstructorReturn,n=e.getPrototypeOf,i=e.get},function(e){l=e.cclegacy,u=e._decorator,p=e.RenderFlow}],execute:function(){l._RF.push({},"39c01LTfQtF5LJVWtCJZPUJ","post-process-flow",void 0),f=u.ccclass,u.property,e("PostProcessFlow",(a=f("PostProcessFlow"),a(d=function(e){function t(){return r(this,t),c(this,n(t).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(e){e.camera.update(),this.pipeline.sceneCulling(e),this.pipeline.updateUBOs(e),i(n(t.prototype),"render",this).call(this,e)}},{key:"rebuild",value:function(){}},{key:"destroy",value:function(){}}]),t}(p))||d)),l._RF.pop()}}}));

System.register("chunks:///shader-lib/post-process/post-process-renderer.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./editor/post-process-renderer-materials.js","./post-process-command.js"],(function(e,t){var i,n,r,a,s,o,p,u,c,l,d,m,_,h,y,f,v,b,g,w,N,D,k,C,M,O,j,P,z,R,T,x,E,F;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0,_step:void 0}),{setters:[function(e){i=e.createForOfIteratorHelper,n=e.applyDecoratedDescriptor,r=e.classCallCheck,a=e.createClass,s=e.initializerDefineProperty},function(e){o=e.cclegacy,p=e._decorator,u=e.Enum,c=e.Material},function(e){l=e.default},function(e){d=e.default}],execute:function(){o._RF.push({},"8254f2IDhRCY58lvumEgkun","post-process-renderer",void 0),k=p.property,C=p.type,M=p.ccclass,O=function e(t,i){r(this,e),this.outputName="",this.inputNames=[],void 0!==t&&(this.outputName=t),void 0!==i&&(this.inputNames=i)},j={},P=0,z=i(l);try{for(z.s();!(R=z.n()).done;)T=R.value,j[T[0]]=P++}catch(e){z.e(e)}finally{z.f()}u(j),(x=new Map).set(1,new O("bloom_texture")),x.set(2,new O("",["bloom_texture"])),(E=new Map).set("bloom",x),m=M("PostProcessRenderer"),_=C(c),h=C(c),y=C(j),f=C(j),F=m((g=n((b=function(){function e(){r(this,e),this._passDefines=new Map,this._commandMap=new Map,this._commands=[],s(this,"_enabled",g,this),s(this,"_material",w,this),s(this,"_type",N,this),s(this,"_typeName",D,this),this._inited=!1}return a(e,[{key:"init",value:function(){this._inited||(this._inited=!0,this._updateType())}},{key:"_updateType",value:function(){if(CC_EDITOR){var e=j[this._type];this._material=l.get(e),this._typeName=e}this._passDefines=E.get(this._typeName),this._updateCommands()}},{key:"_updateMaterial",value:function(e){this._material=e,this._updateCommands()}},{key:"_updateCommands",value:function(){var e=this._commandMap,t=this._commands;t.length=0,e.clear();var i=this._material;if(i)for(var n=0;n<i.passes.length;n++){var r=i.passes[n],a=new d(r),s=this._passDefines&&this._passDefines.get(n);if(s&&(s.outputName&&(a.outputName=s.outputName,e.set(a.outputName,a)),s.inputNames&&s.inputNames.length>0))for(var o=0;o<s.inputNames.length;o++){var p=s.inputNames[o],u=e.get(p);u?a.inputCommands.push(u):cc.warn("Can not find input command with name ".concat(p))}t.push(a)}}},{key:"commands",get:function(){return this.init(),this._commands}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"material",get:function(){return this._material}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this._updateType()}}]),e}()).prototype,"_enabled",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),n(b.prototype,"enabled",[k],Object.getOwnPropertyDescriptor(b.prototype,"enabled"),b.prototype),w=n(b.prototype,"_material",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n(b.prototype,"material",[h],Object.getOwnPropertyDescriptor(b.prototype,"material"),b.prototype),N=n(b.prototype,"_type",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n(b.prototype,"type",[f],Object.getOwnPropertyDescriptor(b.prototype,"type"),b.prototype),D=n(b.prototype,"_typeName",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=b))||v,o._RF.pop(),e("default",F)}}}));

System.register("chunks:///shader-lib/post-process/post-process-stage.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,i,n,s,a,o,u,h,d,l,c,f,p,g,_,m,v,A,b,T,y,w,C,B,S;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){r=e.inherits,i=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.createClass,o=e.get,u=e.typeof},function(e){h=e.cclegacy,d=e.pipeline,l=e._decorator,c=e.director,f=e.Director,p=e.GFXClearFlag,g=e.GFXFormat,_=e.GFXTextureUsageBit,m=e.GFXTextureType,v=e.GFXTextureViewType,A=e.RenderStage}],execute:function(){h._RF.push({},"7f67cRmZeJIfJ75YmYXl1p1","post-process-stage",void 0),y=d.UBOGlobal,w=l.ccclass,l.property,C=[],B=function e(t,r,n){i(this,e),this.pass=null,this.input=null,this.output=null,this.pass=t,this.input=r,this.output=n},S=[{r:0,g:0,b:0,a:1}],e("PostProcessStage",(b=w("PostProcessStage"),b(T=function(e){function t(){var e,r;i(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(r=n(this,(e=s(t)).call.apply(e,[this].concat(o))))._psos=[],r._renderers=[],r._renderCommands=[],r._SSAA=1,r._originFrameBuffer=null,r}return r(t,e),a(t,[{key:"activate",value:function(e){o(s(t.prototype),"activate",this).call(this,e),this.createCmdBuffer()}},{key:"destroy",value:function(){this._cmdBuff&&(this._cmdBuff.destroy(),this._cmdBuff=null)}},{key:"render",value:function(e){var t=this._cmdBuff;this.sortRenderQueue(),t.begin();var r=e.camera;S[0].a=r.clearColor.a,S[0].r=r.clearColor.r,S[0].g=r.clearColor.g,S[0].b=r.clearColor.b;var i=r.viewport;this._renderArea.x=i.x*r.width,this._renderArea.y=i.y*r.height;var n=e.window.framebuffer;0!==this._renderCommands.length?(n=this._originFrameBuffer,this._renderArea.width=r.width*this.SSAA,this._renderArea.height=r.height*this.SSAA):(this._renderArea.width=r.width,this._renderArea.height=r.height),t.beginRenderPass(n,this._renderArea,r.clearFlag,S,r.clearDepth,r.clearStencil);for(var s=0;s<this._renderQueues.length;s++)t.execute(this._renderQueues[s].cmdBuffs.array,this._renderQueues[s].cmdBuffCount);t.endRenderPass();var a=this._renderCommands;if(0!==a.length)for(var o=this._pipeline.quadIA,u=0;u<a.length;u++)this._renderArea.width=r.width,this._renderArea.height=r.height,(n=a[u].output)||(n=e.window.framebuffer),t.beginRenderPass(n,this._renderArea,p.ALL,[{r:0,g:0,b:0,a:1}],1,0),t.bindPipelineState(this._psos[u]),t.bindBindingLayout(this._psos[u].pipelineLayout.layouts[0]),t.bindInputAssembler(o),t.draw(o),t.endRenderPass();t.end(),C.length=0,C[0]=t,this._device.queue.submit(C)}},{key:"resize",value:function(e,t){}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._renderers=e,t!==this._SSAA&&(this._SSAA=t,this._originFrameBuffer&&this._originFrameBuffer.destroy(),this._originFrameBuffer=null),this.rebuild()}},{key:"createFrameBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.pipeline,i=r._shadingWidth*t,n=r._shadingHeight*t,s=r._getTextureFormat(g.UNKNOWN,_.COLOR_ATTACHMENT),a=this._device.createTexture({type:m.TEX2D,usage:_.COLOR_ATTACHMENT,format:s,width:i,height:n}),o=this._device.createTextureView({texture:a,type:v.TV2D,format:s}),u=null;if(e){var h=r._getTextureFormat(g.UNKNOWN,_.DEPTH_STENCIL_ATTACHMENT),d=this._device.createTexture({type:m.TEX2D,usage:_.DEPTH_STENCIL_ATTACHMENT,format:h,width:i,height:n});u=this._device.createTextureView({texture:d,type:v.TV2D,format:h})}var l=this._device.createFramebuffer({renderPass:r._renderPasses.get(1),colorViews:[o],depthStencilView:u});return l}},{key:"rebuild",value:function(){this._psos.length=0;var e=this._renderCommands;e.length=0;for(var t=!1,r=this._renderers,i=0;i<r.length;i++){var n=this.renderers[i];if(n&&n.enabled){t=!0;break}}if(t){var s=this._pipeline;this._originFrameBuffer||(this._originFrameBuffer=this.createFrameBuffer(!0,this.SSAA));for(var a,o,h,d=this._framebuffer=this._originFrameBuffer,l=d.colorViews[0],c=s.globalBindings.get(y.BLOCK.name),f=new Map,p=0;p<r.length;p++){var g=this.renderers[p];if(g&&g.enabled)for(var _=g.commands,m=0;m<_.length;m++){var v=_[m],A=v.pass;A.bindBuffer(y.BLOCK.binding,c.buffer);var b=A.getBinding("pe_origin_texture");if(b&&A.bindTextureView(b,l),v.inputCommands)for(var T=0;T<v.inputCommands.length;T++){var w=v.inputCommands[T].outputName,C=A.getBinding(w);if(C){var S=f.get(w);S?A.bindTextureView(C,S.colorViews[0]):cc.warn("Can not find input frame buffer for input name [".concat(w,"] in post process renderer [").concat(u(g),"]"))}else cc.warn("Can not find input name [".concat(w,"] for post process renderer [").concat(u(g),"]"))}var F=a||d,x=A.getBinding("pe_input_texture");x&&A.bindTextureView(x,F.colorViews[0]),o||(o=this.createFrameBuffer()),e.push(new B(A,F,o)),v.outputName&&(f.set(v.outputName,o),o=null),h=a,a=o,o=h;var N=A.createPipelineState();N.pipelineLayout.layouts[0].update(),A.update(),this._psos.push(N)}}e.length>0&&(e[e.length-1].output=null)}}},{key:"renderers",get:function(){return this._renderers},set:function(e){this._renderers=e,this.rebuild()}},{key:"SSAA",get:function(){return this._SSAA},set:function(e){this._SSAA=e,this.rebuild()}}]),t}(A))||T)),c.on(f.EVENT_BEFORE_SCENE_LAUNCH,(function(){var e=c.root.pipeline.getFlow("PostProcessFlow");e&&(e.stages[0].renderers=[])})),h._RF.pop()}}}));

System.register("chunks:///shader-lib/post-process/post-process.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./post-process-renderer.js"],(function(e,t){var r,s,o,i,n,a,p,c,u,l,d,_,h,y,f,g,S,v,A,b,m,P,w,O,k,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,s=e.inherits,o=e.classCallCheck,i=e.possibleConstructorReturn,n=e.getPrototypeOf,a=e.initializerDefineProperty,p=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,l=e._decorator,d=e.Material,_=e.director,h=e.Component},function(e){y=e.default}],execute:function(){u._RF.push({},"a903fE0W+VGtrSBe5BmmOL+","post-process",void 0),w=l.ccclass,O=l.property,k=l.type,j=l.executeInEditMode,e("PostProcess",(f=w("PostProcess"),g=k(y),S=k(y),v=k(d),f(A=j((m=r((b=function(e){function t(){var e,r;o(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return(r=i(this,(e=n(t)).call.apply(e,[this].concat(c))))._stage=null,a(r,"_renderers",m,p(r)),a(r,"_SSAA",P,p(r)),r}return s(t,e),c(t,[{key:"start",value:function(){var e=_.root.pipeline.getFlow("PostProcessFlow");e&&(this._stage=e.stages[0],this._updateStage())}},{key:"_updateStage",value:function(){this._stage&&(this._stage.renderers=this._renderers,this._stage.update(this.renderers,this.SSAA))}},{key:"renderers",get:function(){return this._renderers},set:function(e){this._renderers=e,this._updateStage()}},{key:"materials",get:function(){return this._renderers.map((function(e){return e.material}))},set:function(e){this._renderers.forEach((function(t,r){t._updateMaterial(e[r])})),this._updateStage()}},{key:"SSAA",get:function(){return this._SSAA},set:function(e){this._SSAA=e,this._updateStage()}}]),t}(h)).prototype,"_renderers",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r(b.prototype,"renderers",[S],Object.getOwnPropertyDescriptor(b.prototype,"renderers"),b.prototype),r(b.prototype,"materials",[v],Object.getOwnPropertyDescriptor(b.prototype,"materials"),b.prototype),P=r(b.prototype,"_SSAA",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),r(b.prototype,"SSAA",[O],Object.getOwnPropertyDescriptor(b.prototype,"SSAA"),b.prototype),A=b))||A)||A)),u._RF.pop()}}}));

System.register("chunks:///spline/src/utils/mesh-processing/mesh-utility.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,i,n,s,a,f,u,o,c,l;function v(e){if(e&&void 0!==e[0]&&e[0]instanceof a){for(var t=[],r=0,i=e.length;r<i;r++){var n=e[r];n.constructor.toArray(t,n,t.length)}return t}return e}function d(e,t,i,n,a){var o,c=e.struct.vertexBundles[0].attributes,l=0,v=s.UNKNOWN,d=r(c);try{for(d.s();!(o=d.n()).done;){var m=o.value;if(m.name===t){v=m.format;break}l+=f[m.format].size}}catch(e){d.e(e)}finally{d.f()}u.writeBuffer(new DataView(n),i,v,l,a)}return{setters:[function(e){r=e.createForOfIteratorHelper},function(e){i=e.cclegacy,n=e.GFXAttributeName,s=e.GFXFormat,a=e.ValueType,f=e.GFXFormatInfos,u=e.utils}],execute:function(){i._RF.push({},"77f161VtwtBR7xMTl4loQCo","mesh-utility",void 0),o={positions:{size:3,gfxName:n.ATTR_POSITION},normals:{size:3,gfxName:n.ATTR_NORMAL},uvs:{size:2,gfxName:n.ATTR_TEX_COORD},tangents:{size:4,gfxName:n.ATTR_TANGENT}},c={tagent:{name:n.ATTR_TANGENT,format:s.RGBA32F}},l={getReversedTriangles:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[];e.copyIndices(t,r);for(var i=r.length/3,n=0;n<i;n++){var s=r[3*n];r[3*n]=r[3*n+1],r[3*n+1]=s}return r},createMesh:function(e){for(var t in(e=Object.assign({},e)).primitiveMode=e.primitiveType,o)e[t]&&(e[t]=v(e[t]));return e.tangents&&(e.customAttributes=[{attr:c.tagent,values:e.tangents}]),cc.utils.createMesh(e)},updateMesh:function(e,t){var r=e.mesh;for(var i in(t=Object.assign({},t)).primitiveMode=t.primitiveType,o)t[i]&&(t[i]=v(t[i]));var n=r.renderingSubMeshes[0],s=n.vertexBuffers[0],a=function(e){var t=Number.MAX_SAFE_INTEGER;for(var r in o)e[r]&&(t=Math.min(e[r].length/o[r].size,t));return t}(t),f=s.stride*a,u=s.vbuffer;if(u&&u.length===f)for(var c in o)t[c]&&d(r,o[c].gfxName,t[c],u.buffer,s.stride);else{for(var l in u=s.vbuffer=new Uint8Array(f),o)t[l]&&d(r,o[l].gfxName,t[l],u.buffer,s.stride);s.resize(f)}if(s.update(u.buffer),t.indices){var m=n.indexBuffer,g=function(e){return e.indices?e.indices.length:0}(t),h=m.ibuffer;if(!h||h.length!==g){var p=1===m.stride?Uint8Array:2===m.stride?Uint16Array:Uint32Array;h=m.ibuffer=new p(g),m.resize(g*m.stride)}h.set(t.indices),m.update(h.buffer);var T=e.model&&e.model.getSubModel(0);if(T){var b=T.inputAssembler;b&&(b.vertexCount=a,b.indexCount=g,T.updateCommandBuffer())}}},updateOrCreateModelMesh:function(e,t){e.mesh?this.updateMesh(e,t):e.mesh=this.createMesh(t)}},i._RF.pop(),e("default",l)}}}));

System.register("chunks:///spline/src/utils/mesh-processing/mesh-bender.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","./mesh-vertex.js","../../curve-sample.js","./mesh-utility.js"],(function(t,e){var i,n,s,r,h,l,a,o,u,c,f,g,p,v,y,d,m,_,S,k,T,b,C,O,w;function A(t){var e=t.source;switch(O=0,t.alignType){case T.None:break;case T.Top:O=t.alignOffset-(e.minY+e.lengthY);break;case T.bottom:O=t.alignOffset-e.minY}C.set(e.minY+t.heightRange.x*e.lengthY,e.minY+t.heightRange.y*e.lengthY)}function D(t,e,i,n){return(e=v.pool.get().set(e)).position.y=g(e.position.y,C.x,C.y),e.position.y+=O,t.heightCurve&&(e.position.y*=t.heightCurve.evaluate(n,.5)),e=i.getBent(e,e)}function R(t,e,i,n){d.updateOrCreateModelMesh(t.getComponent(p),{positions:e.map((function(t){return t.position})),normals:e.map((function(t){return t.normal})),tangents:e.map((function(t){return t.tangent})),uvs:e.map((function(t){return t.uv})),indices:n||t.source.triangles});for(var s=0;s<e.length;s++)v.pool.put(e[s]);var r,h=l(i);try{for(h.s();!(r=h.n()).done;){var a=r.value;y.pool.put(a[1])}}catch(t){h.e(t)}finally{h.f()}i.clear()}return t({_class:void 0,_temp:void 0,FillingMode:void 0,AlignType:void 0,ValueType:void 0}),{setters:[function(t){i=t.inherits,n=t.classCallCheck,s=t.possibleConstructorReturn,r=t.getPrototypeOf,h=t.createClass,l=t.createForOfIteratorHelper},function(t){a=t.cclegacy,o=t._decorator,u=t.Enum,c=t.Vec2,f=t.Component,g=t.clamp,p=t.ModelComponent},function(t){v=t.default},function(t){y=t.default},function(t){d=t.default}],execute:function(){a._RF.push({},"e6d5cY/mT5Jf50xDNH6cOzK","mesh-bender",void 0),_=o.ccclass,S=o.executeInEditMode,function(t){t[t.Once=0]="Once",t[t.Repeat=1]="Repeat",t[t.StretchToInterval=2]="StretchToInterval"}(k||t("FillingMode",k={})),u(k),function(t){t[t.None=0]="None",t[t.Top=1]="Top",t[t.bottom=2]="bottom"}(T||t("AlignType",T={})),u(T),function(t){t[t.Absolute=0]="Absolute",t[t.Percent=1]="Percent"}(b||t("ValueType",b={})),u(b),C=new c,O=0,w=_(m=S(m=function(t){function e(){var t,i;n(this,e);for(var h=arguments.length,l=new Array(h),a=0;a<h;a++)l[a]=arguments[a];return(i=s(this,(t=r(e)).call.apply(t,[this].concat(l)))).dirty=!1,i._sampleCache=new Map,i._mode=k.StretchToInterval,i._offset=0,i._offsetValueType=b.Absolute,i._heightCurve=null,i._heightRange=new c(0,1),i._alignType=T.None,i._alignOffset=0,i}return i(e,t),h(e,[{key:"setInterval",value:function(t){if(this.curve!=t){if(null==t)throw new Error("curve");null!=this.curve&&this.curve.changed.removeListener(this.setDirty,this),this.curve=t,this.spline=null,t.changed.addListener(this.setDirty,this),this.useSpline=!1,this.dirty=!0}}},{key:"setInterval1",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.spline!=t||this.intervalStart!=e||this.intervalEnd!=i){if(null==t)throw new Error("spline");if(e<0||e>=t.length)throw new Error("interval start must be 0 or greater and lesser than spline length (was "+e+")");if(0!=i&&i<=e||i>t.length)throw new Error("interval end must be 0 or greater than interval start, and lesser than spline length (was "+i+")");null!=this.spline&&this.spline.curveChanged.removeListener(this.setDirty,this),this.spline=t,t.curveChanged.addListener(this.setDirty,this),this.curve=null,this.intervalStart=e,this.intervalEnd=i,this.useSpline=!0,this.dirty=!0}}},{key:"onEnable",value:function(){}},{key:"update",value:function(){this.computeIfNeeded()}},{key:"computeIfNeeded",value:function(){this.dirty&&this.compute()}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"compute",value:function(){switch(this.dirty=!1,this.mode){case k.Once:this.fillOnce();break;case k.Repeat:this.fillRepeat();break;case k.StretchToInterval:this.fillStretch()}}},{key:"onDestroy",value:function(){null!=this.curve&&this.curve.changed.removeListener(this.compute)}},{key:"fillOnce",value:function(){var t=this._sampleCache,e=this.source,i=[];A(this);for(var n=this.calcOffset,s=0;s<e.vertices.length;s++){var r=e.vertices[s],h=r.position.x-e.minX+n,l=0==e.lengthX?0:Math.abs(r.position.x-e.minX)/e.lengthX,a=""+h,o=t.get(a);if(!o){if(this.useSpline){for(var u=this.intervalStart+h;u>this.spline.length;)u-=this.spline.length;o=this.spline.getSampleAtDistance(u)}else{if(h>this.curve.length)continue;o=this.curve.getSampleAtDistance(h,y.pool.get())}t.set(a,o)}r=D(this,r,o,l),i.push(r)}R(this,i,t)}},{key:"fillRepeat",value:function(){for(var t=this.source,e=this.useSpline?(0==this.intervalEnd?this.spline.length:this.intervalEnd)-this.intervalStart:this.curve.length,i=Math.floor(e/t.lengthX),n=this._sampleCache,s=t.vertices,r=[],h=0;h<i+1;h++)for(var l=0;l<t.triangles.length;l++)r.push(t.triangles[l]+s.length*h);A(this);for(var a=[],o=this.calcOffset,u=0;u<i;u++){for(var c=0;c<s.length;c++){var f=s[c],g=f.position.x-t.minX+o,p="".concat(u,"_").concat(g),v=n.get(p);if(!v){if(this.useSpline){for(var d=this.intervalStart+g;d>this.spline.length;)d-=this.spline.length;v=this.spline.getSampleAtDistance(d)}else{if(g>this.curve.length)continue;v=this.curve.getSampleAtDistance(g,y.pool.get())}n.set(p,v)}f=D(this,f,v,g/e),a.push(f)}o+=t.lengthX}for(var m=(this.useSpline?this.spline.length:this.curve.length)-o,_=0;_<s.length;_++){var S=s[_],k=0==t.lengthX?0:Math.abs(S.position.x-t.minX)/t.lengthX,T=o+k*m,b=""+T,C=n.get(b);if(!C){if(this.useSpline){for(var O=this.intervalStart+T;O>this.spline.length;)O-=this.spline.length;C=this.spline.getSampleAtDistance(O)}else{if(T>this.curve.length)continue;C=this.curve.getSampleAtDistance(T,y.pool.get())}n.set(b,C)}S=D(this,S,C,k),a.push(S)}R(this,a,n,r)}},{key:"fillStretch",value:function(){var t=[],e=this.source,i=this._sampleCache;A(this);for(var n=0;n<e.vertices.length;n++){var s=e.vertices[n],r=0==e.lengthX?0:Math.abs(s.position.x-e.minX)/e.lengthX,h=""+r,l=i.get(h);if(!l){if(this.useSpline){var a=0==this.intervalEnd?this.spline.length-this.intervalStart:this.intervalEnd-this.intervalStart,o=this.intervalStart+a*r;o>this.spline.length&&(o=this.spline.length,cc.log("dist "+o+" spline length "+this.spline.length+" start "+this.intervalStart)),l=this.spline.getSampleAtDistance(o)}else l=this.curve.getSampleAtDistance(this.curve.length*r,y.pool.get());i.set(h,l)}s=D(this,s,l,r),t.push(s)}R(this,t,i)}},{key:"source",get:function(){return this._source},set:function(t){t!=this._source&&(this.dirty=!0,this._source=t)}},{key:"mode",get:function(){return this._mode},set:function(t){t!=this._mode&&(this.dirty=!0,this._mode=t)}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t,this.dirty=!0}},{key:"offsetValueType",get:function(){return this._offsetValueType},set:function(t){this._offsetValueType=t,this.dirty=!0}},{key:"length",get:function(){return this.useSpline?this.spline.length:this.curve.length}},{key:"calcOffset",get:function(){return this.offsetValueType===b.Absolute?this.offset:this.offset*this.length}},{key:"heightCurve",get:function(){return this._heightCurve},set:function(t){this._heightCurve=t,this.dirty=!0}},{key:"heightRange",get:function(){return this._heightRange},set:function(t){this._heightRange.set(t),this.dirty=!0}},{key:"alignType",get:function(){return this._alignType},set:function(t){this._alignType=t,this.dirty=!0}},{key:"alignOffset",get:function(){return this._alignOffset},set:function(t){this._alignOffset=t,this.dirty=!0}}]),e}(f))||m)||m,a._RF.pop(),t("default",w)}}}));

System.register("chunks:///spline/src/utils/mesh-processing/source-mesh.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","./mesh-vertex.js","./mesh-utility.js"],(function(t,e){var i,s,n,h,r,a,u,l,o,c,_;return{setters:[function(t){i=t.createClass,s=t.classCallCheck},function(t){n=t.cclegacy,h=t.Vec3,r=t.Quat,a=t.Mesh,u=t.GFXAttributeName,l=t.Vec4},function(t){o=t.default},function(t){c=t.default}],execute:function(){n._RF.push({},"0eba73fr/BFAqywv0rcR6s6","source-mesh",void 0),_=function(){function t(e){s(this,t),this.translation=new h,this.rotation=new r,this.scale=new h,this._vertices=[],this._triangles=[],this._minX=[0],this._lengthX=[0],this._minY=[0],this._lengthY=[0],e instanceof a?(this._mesh=e,this.translation=cc.v3(),this.rotation=cc.quat(),this.scale=cc.v3()):(this._mesh=e._mesh,this.translation=e.translation.clone(),this.rotation=e.rotation.clone(),this.scale=e.scale.clone())}return i(t,[{key:"getVertices",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._vertices[t]||this.buildData(),this._vertices[t]}},{key:"getTriangles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._vertices[t]||this.buildData(),this._triangles[t]}},{key:"getMinX",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._vertices[t]||this.buildData(),this._minX[t]}},{key:"getLengthX",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._vertices[t]||this.buildData(),this._lengthX[t]}},{key:"subCount",value:function(){return this.mesh?this.mesh.subMeshCount:0}},{key:"mesh",get:function(){return this._mesh}},{key:"vertices",get:function(){return this._vertices[0]||this.buildData(),this._vertices[0]}},{key:"triangles",get:function(){return this._vertices[0]||this.buildData(),this._triangles[0]}},{key:"minX",get:function(){return this._vertices[0]||this.buildData(),this._minX[0]}},{key:"lengthX",get:function(){return this._vertices[0]||this.buildData(),this._lengthX[0]}},{key:"minY",get:function(){return this._vertices[0]||this.buildData(),this._minY[0]}},{key:"lengthY",get:function(){return this._vertices[0]||this.buildData(),this._lengthY[0]}}],[{key:"build",value:function(e){return new t(e)}}]),i(t,[{key:"translate",value:function(t,e,i){return this.reset(),"number"==typeof t?this.translation.set(t,e,i):this.translation.set(t),this}},{key:"rotate",value:function(t){return this.reset(),this.rotation.set(t),this}},{key:"scaleRes",value:function(t,e,i){return this.reset(),"number"==typeof t?this.scale.set(t,e,i):this.scale.set(t),this}},{key:"reset",value:function(){this._vertices.length>0&&(this._vertices.forEach((function(t){t.forEach((function(t){o.pool.put(t)}))})),this._vertices.length=0),this._triangles.length=0}},{key:"buildData",value:function(){for(var t=this.mesh.subMeshCount,e=0;e<t;e++){var i=this.scale.x<0;this.scale.y<0&&(i=!i),this.scale.z<0&&(i=!i),i?this._triangles[e]=c.getReversedTriangles(this._mesh,e):(this._triangles[e]||(this._triangles[e]=[]),this._mesh.copyIndices(e,this._triangles[e]));for(var s=this._vertices[e]=this._vertices[e]||[],n=this._mesh.readAttribute(e,u.ATTR_POSITION),a=this._mesh.readAttribute(e,u.ATTR_NORMAL),_=this._mesh.readAttribute(e,u.ATTR_TANGENT),g=_&&_.length>0,v=this._mesh.readAttribute(e,u.ATTR_TEX_COORD),m=v&&v.length>0,f=this._mesh.readAttribute(e,u.ATTR_TEX_COORD1),b=f&&f.length>0,d=n.length/3,y=0;y<d;y++){var p=s[y];p||(p=s[y]=o.pool.get()),p.position.set(n[3*y+0],n[3*y+1],n[3*y+2]),p.normal.set(a[3*y+0],a[3*y+1],a[3*y+2]),m&&p.uv.set(v[2*y+0],v[2*y+1]),b&&p.uv1.set(f[2*y+0],f[2*y+1]),g&&p.tangent.set(_[4*y+0],_[4*y+1],_[4*y+2],_[4*y+3]),this.rotation.equals(r.IDENTITY)||(h.transformQuat(p.position,p.position,this.rotation),h.transformQuat(p.normal,p.normal,this.rotation),g&&l.transformQuat(p.tangent,p.tangent,this.rotation)),this.scale.equals(h.ONE)||h.multiply(p.position,p.position,this.scale),p.position.add(this.translation)}for(;y<s.length;y++)s[y]&&o.pool.put(s[y]);s.length=d,this._minX[e]=Number.MAX_SAFE_INTEGER;var T=-Number.MAX_SAFE_INTEGER;this._minY[e]=Number.MAX_SAFE_INTEGER;for(var A=-Number.MAX_SAFE_INTEGER,X=0;X<s.length;X++){var k=s[X].position;T=Math.max(T,k.x),this._minX[e]=Math.min(this._minX[e],k.x),A=Math.max(A,k.y),this._minY[e]=Math.min(this._minY[e],k.y)}this._lengthX[e]=Math.abs(T-this._minX[e]),this._lengthY[e]=Math.abs(A-this._minY[e])}}}]),t}(),n._RF.pop(),t("default",_)}}}));

System.register("chunks:///spline/src/utils/animation-curve.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,n){var t,u,r,a,c,o;function i(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new c.Keyframe;return r.time=e,r.value=n,r.inTangent=t,r.outTangent=u,r}return{setters:[function(e){t=e.createClass,u=e.classCallCheck},function(e){r=e.cclegacy,a=e.CurveRange,c=e.geometry}],execute:function(){r._RF.push({},"6e273txUKRNG6K/6j/PEtnf","animation-curve",void 0),o=function(){function e(){u(this,e)}return t(e,null,[{key:"linear",value:function(e,n,t,u){var r=(u-n)/(t-e),c=new a;return c.mode=a.Mode.Curve,c.curve.keyFrames.length=0,e===t?c.curve.addKey(i(e,n)):(c.curve.addKey(i(e,n,0,r)),c.curve.addKey(i(t,u,r,0))),c}},{key:"easeInOut",value:function(e,n,t,u){var r=new a;return r.mode=a.Mode.Curve,r.curve.keyFrames.length=0,e===t?r.curve.addKey(i(e,n)):(r.curve.addKey(i(e,n,0,0)),r.curve.addKey(i(t,u,0,0))),r}},{key:"constant",value:function(e){var n=new a;return n.constant=e,n}},{key:"one",value:function(){return this.constant(1)}},{key:"zero",value:function(){return this.constant(0)}}]),e}(),r._RF.pop(),e("default",o)}}}));

System.register("chunks:///spline/src/comps/mesh-tiling.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../spline.js","./spline-util-renderer.js","../utils/mesh-processing/mesh-bender.js","../utils/mesh-processing/source-mesh.js","../utils/animation-curve.js"],(function(e,t){var r,i,o,n,s,a,p,c,l,u,h,f,y,g,d,_,v,m,b,O,w,C,j,k,T,P,z,D,R,V,S,M,F,I,x,A,E,N,Q,B,H,X,q,G,J,K,L,U,W,Y,Z,$,ee,te,re,ie,oe,ne,se,ae,pe,ce,le,ue,he;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_dec15:void 0,_dec16:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,o=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,p=e.assertThisInitialized,c=e.createClass},function(e){l=e.cclegacy,u=e._decorator,h=e.Vec3,f=e.Material,y=e.Mesh,g=e.CurveRange,d=e.Vec2,_=e.ModelComponent,v=e.Node,m=e.Quat},function(e){b=e.default},function(e){O=e.default},function(e){w=e.default,C=e.FillingMode,j=e.ValueType,k=e.AlignType},function(e){T=e.default},function(e){P=e.default}],execute:function(){l._RF.push({},"4a587hdoeRPaoMhtXF2Qk+F","mesh-tiling",void 0),se=u.ccclass,ae=u.executeInEditMode,u.float,pe=u.type,u.boolean,ce=u.property,le=new h,ue=new h,z=pe(f),D=pe(f),R=pe(y),V=pe(y),S=pe(h),M=pe(h),F=pe(h),I=ce({type:C}),x=pe(j),A=pe(j),E=pe(g),N=pe(g),Q=pe(d),B=pe(d),H=pe(k),X=pe(k),he=se(q=ae((J=r((G=function(e){function t(){var e,r;o(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=n(this,(e=s(t)).call.apply(e,[this].concat(c))),a(r,"_material",J,p(r)),a(r,"_mesh",K,p(r)),a(r,"_translation",L,p(r)),a(r,"_rotation",U,p(r)),a(r,"_scale",W,p(r)),a(r,"_curveSpace",Y,p(r)),a(r,"_mode",Z,p(r)),a(r,"_offset",$,p(r)),a(r,"_offsetValueType",ee,p(r)),a(r,"_heightCurve",te,p(r)),a(r,"_heightRange",re,p(r)),a(r,"_alignType",ie,p(r)),a(r,"_alignOffset",oe,p(r)),a(r,"_mirror",ne,p(r)),r}return i(t,e),c(t,[{key:"compute",value:function(){if(this.mesh){var e=this.generated.children,t=0;if(this.splineCurve instanceof b)if(this.curveSpace)for(var r=this.spline.curves,i=0;i<r.length;i++)this._getOrcreate(t++,r[i]),this.mirror&&this._getOrcreate(t++,r[i],!0);else this._getOrcreate(t++,this.spline),this.mirror&&this._getOrcreate(t++,this.spline,!0);else this._getOrcreate(t++,this.splineCurve),this.mirror&&this._getOrcreate(t++,this.splineCurve,!0);if(e.length>t)for(var o=e.length-1;o>=t;o--)e[o].parent=null}}},{key:"_updateMaterials",value:function(){for(var e=this.generated.children,t=0;t<e.length;t++){e[t].getComponent(_).material=this.material}}},{key:"_updateMode",value:function(){for(var e=this.generated.children,t=0;t<e.length;t++){e[t].getComponent(w).mode=this.mode}}},{key:"_getOrcreate",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.generated.children[e];i||((i=new v).parent=this.generated);var o=i.getComponent(w);o||(o=i.addComponent(w)),t instanceof b?o.setInterval1(t,0):o.setInterval(t);var n=this.translation,s=this.rotation;r&&((n=le.set(this.translation)).multiplyScalar(-1),(s=ue.set(this.rotation)).multiplyScalar(-1)),o.source=T.build(this.mesh).translate(n).rotate(m.fromEuler(new m,s.x,s.y,s.z)).scaleRes(this.scale),o.mode=this.mode,o.offset=this.offset,o.offsetValueType=this.offsetValueType,o.heightCurve=this.heightCurve,o.heightRange=this.heightRange,o.alignType=this.alignType,o.alignOffset=this.alignOffset;var a=i.getComponent(_);return a||((a=i.addComponent(_)).material=this.material),i}},{key:"material",get:function(){return this._material},set:function(e){this._material=e,this._updateMaterials()}},{key:"mesh",get:function(){return this._mesh},set:function(e){this._mesh=e,this.reset()}},{key:"translation",get:function(){return this._translation},set:function(e){this._translation=e,this.reset()}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.reset()}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e,this.reset()}},{key:"curveSpace",get:function(){return this._curveSpace},set:function(e){this._curveSpace=e,this.onCurveChanged()}},{key:"mode",get:function(){return this._mode},set:function(e){e!=this._mode&&(this._mode=e,this._updateMode())}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset=e,this.onCurveChanged()}},{key:"offsetValueType",get:function(){return this._offsetValueType},set:function(e){this._offsetValueType=e,this.onCurveChanged()}},{key:"heightCurve",get:function(){return this._heightCurve},set:function(e){this._heightCurve=e,this.dirty=!0}},{key:"heightRange",get:function(){return this._heightRange},set:function(e){this._heightRange=e,this.dirty=!0}},{key:"alignType",get:function(){return this._alignType},set:function(e){this._alignType=e,this.dirty=!0}},{key:"alignOffset",get:function(){return this._alignOffset},set:function(e){this._alignOffset=e,this.dirty=!0}},{key:"mirror",get:function(){return this._mirror},set:function(e){this._mirror=e,this.dirty=!0}}]),t}(O)).prototype,"_material",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r(G.prototype,"material",[D],Object.getOwnPropertyDescriptor(G.prototype,"material"),G.prototype),K=r(G.prototype,"_mesh",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r(G.prototype,"mesh",[V],Object.getOwnPropertyDescriptor(G.prototype,"mesh"),G.prototype),L=r(G.prototype,"_translation",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),r(G.prototype,"translation",[S],Object.getOwnPropertyDescriptor(G.prototype,"translation"),G.prototype),U=r(G.prototype,"_rotation",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),r(G.prototype,"rotation",[M],Object.getOwnPropertyDescriptor(G.prototype,"rotation"),G.prototype),W=r(G.prototype,"_scale",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.ONE.clone()}}),r(G.prototype,"scale",[F],Object.getOwnPropertyDescriptor(G.prototype,"scale"),G.prototype),Y=r(G.prototype,"_curveSpace",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r(G.prototype,"curveSpace",[ce],Object.getOwnPropertyDescriptor(G.prototype,"curveSpace"),G.prototype),Z=r(G.prototype,"_mode",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.Repeat}}),r(G.prototype,"mode",[I],Object.getOwnPropertyDescriptor(G.prototype,"mode"),G.prototype),$=r(G.prototype,"_offset",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r(G.prototype,"offset",[ce],Object.getOwnPropertyDescriptor(G.prototype,"offset"),G.prototype),ee=r(G.prototype,"_offsetValueType",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.Absolute}}),r(G.prototype,"offsetValueType",[A],Object.getOwnPropertyDescriptor(G.prototype,"offsetValueType"),G.prototype),te=r(G.prototype,"_heightCurve",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.one()}}),r(G.prototype,"heightCurve",[N],Object.getOwnPropertyDescriptor(G.prototype,"heightCurve"),G.prototype),re=r(G.prototype,"_heightRange",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(0,1)}}),r(G.prototype,"heightRange",[B],Object.getOwnPropertyDescriptor(G.prototype,"heightRange"),G.prototype),ie=r(G.prototype,"_alignType",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.None}}),r(G.prototype,"alignType",[X],Object.getOwnPropertyDescriptor(G.prototype,"alignType"),G.prototype),oe=r(G.prototype,"_alignOffset",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r(G.prototype,"alignOffset",[ce],Object.getOwnPropertyDescriptor(G.prototype,"alignOffset"),G.prototype),ne=r(G.prototype,"_mirror",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r(G.prototype,"mirror",[ce],Object.getOwnPropertyDescriptor(G.prototype,"mirror"),G.prototype),q=G))||q)||q,l._RF.pop(),e("default",he)}}}));

System.register("chunks:///spline/examples/src/follow-path-mesh.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../src/spline.js","../../src/comps/mesh-tiling.js"],(function(e,t){var i,n,r,o,s,l,p,c,a,u,h,f,d,_,g,v,y,m,w,E,I,b,C,T;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,l=e.initializerDefineProperty,p=e.assertThisInitialized,c=e.createClass},function(e){a=e.cclegacy,u=e._decorator,h=e.Vec3,f=e.Mat4,d=e.Component},function(e){_=e.default},function(e){g=e.default}],execute:function(){a._RF.push({},"f58d1ZFzyxClooYbcdNz6O1","follow-path-mesh",void 0),b=u.ccclass,C=u.property,u.type,T=u.executeInEditMode,new h,new f,e("followPathMesh",(v=b("followPathMesh"),y=C({serializable:!1}),v(m=T((E=i((w=function(e){function t(){var e,i;r(this,t);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return i=o(this,(e=s(t)).call.apply(e,[this].concat(c))),l(i,"duration",E,p(i)),l(i,"_previewInEditor",I,p(i)),i._offset=0,i._spline=null,i._meshTilling=null,i}return n(t,e),c(t,[{key:"start",value:function(){}},{key:"update",value:function(e){if(this.spline){if(CC_EDITOR){if(!this.previewInEditor)return;cce.Engine.repaintInEditMode()}var t=this.spline.length/5/60;this.meshTilling.offset=this._offset,this._offset+=t,this._offset=this._offset%this.spline.length}}},{key:"previewInEditor",get:function(){return this._previewInEditor},set:function(e){this._previewInEditor=e,cce.Engine.repaintInEditMode()}},{key:"spline",get:function(){if(!this._spline)for(var e=this.node;e&&(this._spline=e.getComponent(_),!this._spline);)e=e.parent;return this._spline}},{key:"meshTilling",get:function(){return this._meshTilling||(this._meshTilling=this.getComponent(g)),this._meshTilling}}]),t}(d)).prototype,"duration",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),I=i(w.prototype,"_previewInEditor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i(w.prototype,"previewInEditor",[C],Object.getOwnPropertyDescriptor(w.prototype,"previewInEditor"),w.prototype),m=w))||m)||m)),a._RF.pop()}}}));

System.register("chunks:///spline/examples/src/follow-path-object.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../src/spline.js"],(function(e,t){var i,r,n,o,s,a,l,p,c,u,d,f,h,v,_,w,g,y,E,b,m,I,C,M,z,j,k,D,P;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,p=e.createClass},function(e){c=e.cclegacy,u=e._decorator,d=e.Vec3,f=e.Mat4,h=e.Node,v=e.Component},function(e){_=e.default}],execute:function(){c._RF.push({},"1fe87zLTTlCEpoJDQJwELeM","follow-path-object",void 0),M=u.ccclass,z=u.property,j=u.type,k=u.executeInEditMode,D=new d,P=new f,e("followPath",(w=M("followPath"),g=j(h),y=z({serializable:!1}),w(E=k((m=i((b=function(e){function t(){var e,i;n(this,t);for(var r=arguments.length,p=new Array(r),c=0;c<r;c++)p[c]=arguments[c];return i=o(this,(e=s(t)).call.apply(e,[this].concat(p))),a(i,"target",m,l(i)),a(i,"duration",I,l(i)),a(i,"_previewInEditor",C,l(i)),i._time=0,i._spline=null,i}return r(t,e),p(t,[{key:"start",value:function(){}},{key:"update",value:function(e){if(this.spline){if(CC_EDITOR){if(!this.previewInEditor)return;cce.Engine.repaintInEditMode()}var t=this._time/this.duration;t%=this.spline.nodes.length-1;var i=this.spline.getSample(t),r=this.spline.node.worldMatrix;d.transformMat4(D,i.location,r);var n=this.target.parent.worldMatrix;f.invert(P,n),d.transformMat4(D,D,P),this.target.position=D,this.target.rotation=i.rotation,this._time+=e}}},{key:"previewInEditor",get:function(){return this._previewInEditor},set:function(e){this._previewInEditor=e,cce.Engine.repaintInEditMode()}},{key:"spline",get:function(){if(!this._spline)for(var e=this.node;e&&(this._spline=e.getComponent(_),!this._spline);)e=e.parent;return this._spline}}]),t}(v)).prototype,"target",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(b.prototype,"duration",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),C=i(b.prototype,"_previewInEditor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i(b.prototype,"previewInEditor",[z],Object.getOwnPropertyDescriptor(b.prototype,"previewInEditor"),b.prototype),E=b))||E)||E)),c._RF.pop()}}}));

System.register("chunks:///spline/examples/src/spline-examples-ui.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,i){var t,n,o,r,s,a,l,c,p,u,d,h,x,m,v,f,y,g,_,b,k,C,E,R,w;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){p=e.cclegacy,u=e._decorator,d=e.Vec3,h=e.Node,x=e.CameraComponent,m=e.tween,v=e.Component}],execute:function(){p._RF.push({},"7a1859ikulBP7F7uy2uQhdz","spline-examples-ui",void 0),E=u.ccclass,u.property,R=u.type,w=new d,e("SplineExamplesUi",(f=E("SplineExamplesUi"),y=R(h),g=R(x),f((k=t((b=function(e){function i(){var e,t;o(this,i);for(var n=arguments.length,c=new Array(n),p=0;p<n;p++)c[p]=arguments[p];return t=r(this,(e=s(i)).call.apply(e,[this].concat(c))),a(t,"examplesRoot",k,l(t)),a(t,"camera",C,l(t)),t.index=0,t}return n(i,e),c(i,[{key:"start",value:function(){this.gotoExample()}},{key:"next",value:function(){this.index++,this.gotoExample()}},{key:"prev",value:function(){this.index--,this.gotoExample()}},{key:"gotoExample",value:function(){var e=this.examplesRoot.children;this.index<0?this.index=e.length-1:this.index>=e.length&&(this.index=0),w.set(this.camera.node.position),w.x=e[this.index].position.x,m(this.camera.node).to(.5,{position:w}).start()}}]),i}(v)).prototype,"examplesRoot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(b.prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=b))||_)),p._RF.pop()}}}));

System.register("chunks:///spline/src/utils/mesh-processing/fixed-buffer.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,s,r,f,n,a,u,c,o;return{setters:[function(e){i=e.createClass,s=e.classCallCheck},function(e){r=e.cclegacy,f=e.GFXAttributeName,n=e.GFXFormat,a=e.GFXFormatInfos,u=e.utils}],execute:function(){r._RF.push({},"c525aXqpN1H1aoGvmJh1LMN","fixed-buffer",void 0),e("builtinAttributes",c={position:{name:f.ATTR_POSITION,format:n.RGB32F},normal:{name:f.ATTR_NORMAL,format:n.RGB32F},uv:{name:f.ATTR_TEX_COORD,format:n.RG32F},uv1:{name:f.ATTR_TEX_COORD1,format:n.RG32F},color:{name:f.ATTR_COLOR,format:n.RGBA32F},tangent:{name:f.ATTR_TANGENT,format:n.RGBA32F}}),o=function(){function e(){s(this,e),this._buffer=null,this._ibuffer=null,this._vbuffer=null,this._dataView=null,this._iView=null,this._attrs={},this.verticesCount=0,this.indicesCount=0,this.verticesBytes=0,this.indicesBytes=0,this.verticesOffset=0,this.indicesOffset=0,this.stride=0}return i(e,[{key:"writeVertex",value:function(e,t,i){var s=this._attrs[t],r=this.verticesOffset+e*this.stride+s.offset;u.writeBuffer(this._dataView,i,s.format,r,this.stride)}},{key:"writeIndex",value:function(e,t){var i=this.indicesOffset+e;this._iView[i]=t}}],[{key:"create",value:function(t,i){for(var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["position","normal","tangent","uv","uv1"],r=arguments.length>3?arguments[3]:void 0,f=r.arrayBuffer,n=r.arrayBufferVerticesOffset,u=void 0===n?0:n,o=r.arrayBufferIndicesOffset,l=void 0===o?0:o,v={},_=0,d=0;d<s.length;d++){var h=c[s[d]],m=h.format,O=a[m];v[s[d]]={gfxIndex:d,offset:_,format:m},_+=O.size}var y=new e;return y.verticesCount=t,y.indicesCount=i,y.verticesBytes=t*_,y.indicesBytes=2*i,f?(y.verticesOffset=u,y.indicesOffset=l,y._buffer=f):(y.verticesOffset=0,y.indicesOffset=y.verticesBytes,y._buffer=new ArrayBuffer(t*_+2*i)),y._dataView=new DataView(y._buffer,y.verticesOffset,y.verticesBytes),y._iView=new Uint16Array(y._buffer,y.indicesOffset,i),y._vbuffer=new Uint8Array(y._buffer,y.verticesOffset,y.verticesBytes),y._ibuffer=new Uint8Array(y._buffer,y.indicesOffset,y.indicesBytes),y.stride=_,y._attrs=v,y}}]),e}(),r._RF.pop(),e("default",o)}}}));

System.register("chunks:///spline/src/utils/mesh-processing/fixed-model-mesh.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","./fixed-buffer.js"],(function(e,t){var i,r,s,n,u,a,f,o,d,l;return{setters:[function(e){i=e.createClass,r=e.classCallCheck},function(e){s=e.cclegacy,n=e.GFXFormatInfos,u=e.GFXPrimitiveMode,a=e.Mesh,f=e.utils},function(e){o=e.default,d=e.builtinAttributes}],execute:function(){s._RF.push({},"45f87tuFodG1Zv7KceLZJhn","fixed-model-mesh",void 0),65535,l=function(){function e(){r(this,e),this.mesh=null,this.modelComp=null,this.maxBatchVerticesCount=0,this._buffers=[],this._dataView=null,this._iView=null,this._attrs={},this._stride=0}return i(e,[{key:"writeVertex",value:function(e,t,i){var r=this._attrs[t],s=e*this._stride+r.offset;f.writeBuffer(this._dataView,i,r.format,s,this._stride)}},{key:"writeIndex",value:function(e,t){t%=this.maxBatchVerticesCount,this._iView[e]=t}},{key:"update",value:function(){for(var e=this.modelComp,t=this.mesh.renderingSubMeshes,i=0;i<t.length;i++){var r=t[i],s=this._buffers[i];r.vertexBuffers[0].update(s._vbuffer),r.indexBuffer.update(s._ibuffer);var n=e.model&&e.model.getSubModel(i);if(n){var u=n.inputAssembler;if(!u)return;u.vertexCount=s.verticesCount,u.indexCount=s.indicesCount,n.updateCommandBuffer()}}}}],[{key:"create",value:function(t,i,r,s){for(var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:["position","normal","tangent","uv","uv1"],l=new e,c=[],h={},v=0,m=0;m<f.length;m++){var p=d[f[m]],_=p.format;c.push({name:p.name,format:_}),h[f[m]]={gfxIndex:m,offset:v,format:_};var x=n[_];v+=x.size}l._attrs=h,l._stride=v;var B=l._buffers,w=s*t*v,y=s*i*2,C=w+y,g=new ArrayBuffer(C);l._dataView=new DataView(g,0,w),l._iView=new Uint16Array(g,w,s*i);for(var b=Math.floor(65535/t),V=0,I=w;s>0;){var M=Math.min(b,s),k=o.create(M*t,M*i,f,{arrayBuffer:g,arrayBufferVerticesOffset:V,arrayBufferIndicesOffset:I});B.push(k),s-=b,V+=k.verticesBytes,I+=k.indicesBytes}l.maxBatchVerticesCount=b*t;for(var A={vertexBundles:[],primitives:[]},F=0;F<B.length;F++){var G={attributes:c,view:{offset:B[F].verticesOffset,length:B[F].verticesBytes,count:B[F].verticesCount,stride:v}};A.vertexBundles.push(G);var O={primitiveMode:u.TRIANGLE_LIST,vertexBundelIndices:[F],indexView:{offset:B[F].indicesOffset,length:B[F].indicesBytes,count:B[F].indicesCount,stride:2}};A.primitives.push(O)}var S=new a;return S.reset({struct:A,data:new Uint8Array(g)}),l.mesh=S,l.modelComp=r,l}}]),e}(),s._RF.pop(),e("default",l)}}}));

System.register("chunks:///spline/src/comps/type.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,n){var t,c,s,u,i;return e({ScatterType:void 0,VolumeType:void 0}),{setters:[function(e){t=e.classCallCheck},function(e){c=e.cclegacy,s=e.Enum}],execute:function(){c._RF.push({},"33e6exdHldA0LG7DNn25zy1","type",void 0),function(e){e[e.Mesh=0]="Mesh",e[e.Instance=1]="Instance"}(u||e("ScatterType",u={})),s(u),e("VolumeInfo",(function e(){t(this,e),this.volume=0,this.maxCount=0,this.count=0})),function(e){e[e.Area=0]="Area",e[e.Line=1]="Line"}(i||e("VolumeType",i={})),s(i),c._RF.pop()}}}));

System.register("chunks:///spline/src/comps/scatter/scatter-item.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../utils/mesh-processing/source-mesh.js","../../utils/mesh-processing/fixed-model-mesh.js","../type.js"],(function(e,t){var i,r,s,n,o,a,h,u,c,l,p,f,d,_,m,v,y,g,M,b,C,x,w,S,k,V,A,j,I,P,O,D,z,R,W;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.createClass,s=e.classCallCheck,n=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e._decorator,h=e.Vec3,u=e.Vec4,c=e.Prefab,l=e.ModelComponent,p=e.Node,f=e.Mesh,d=e.Vec2},function(e){_=e.default},function(e){m=e.default},function(e){v=e.ScatterType}],execute:function(){o._RF.push({},"10ce4kXixhA/psyIahwT6RE","scatter-item",void 0),V=a.ccclass,A=a.type,j=a.property,I=new h,P=new h,O=new u,D=new Array(2).fill(0),z=new Array(3).fill(0),R=new Array(4).fill(0),y=V("ScatterItem"),g=A(c),M=A(c),W=y((x=i((C=function(){function e(){s(this,e),n(this,"_prefab",x,this),n(this,"_type",w,this),n(this,"_volume",S,this),this._maxCount=0,this._fixedMeshes=[],n(this,"_meshStructs",k,this),this._sourceMesh=null,this._updated=!1,this.currentCount=0,this.node=null}return r(e,[{key:"init",value:function(e,t,i){if(this.node=e,this._maxCount=t,this._type=i,this.currentCount=0,this.prefab)if(this._type===v.Mesh){this.node.removeAllChildren();var r=cc.instantiate(this.prefab);r.setPosition(0,0,0);var s=r.getComponent(l)||r.getComponentInChildren(l);s&&s.mesh&&(this._sourceMesh=_.build(s.mesh),s.node.getWorldRotation(this._sourceMesh.rotation),s.node.getWorldPosition(this._sourceMesh.translation),s.node.getWorldScale(this._sourceMesh.scale),this._sourceMesh.reset());var n=s&&s.sharedMaterials,o=this._sourceMesh.subCount();this._fixedMeshes.length=0,this._meshStructs.length=0;for(var a=0;a<o;a++){var h=new p("ScatterItemModel"),u=h.addComponent(l);this._fixedMeshes[a]=m.create(this._sourceMesh.getVertices(a).length,this._sourceMesh.getTriangles(a).length,u,this.maxCount),this._meshStructs[a]=this._fixedMeshes[a].mesh.struct,u.mesh=this._fixedMeshes[a].mesh,u.shadowCastingMode=s.shadowCastingMode,u.lightmapSettings=s.lightmapSettings;for(var c=u.mesh.renderingSubMeshes,f=n[a]||n[0],d=0;d<c.length;d++)u.setMaterial(f,d);h.parent=this.node}}else this.node.removeComponent(l),this._sourceMesh=null,this._fixedMeshes.length=0}},{key:"initWithVirtualMesh",value:function(e,t){this.node=e;for(var i=e.children,r=this._meshStructs,s=0;s<r.length;s++){var n=i[s];if(n){var o=n.getComponent(l),a=new f;a.reset({struct:r[s],data:t.data}),o.mesh=a}else cc.warn("Can not find scatter item children "+s)}}},{key:"shiftStructOffset",value:function(e){for(var t=this._meshStructs,i=0;i<t.length;i++)t[i].primitives.forEach((function(t){return t.indexView.offset+=e})),t[i].vertexBundles.forEach((function(t){return t.view.offset+=e}))}},{key:"fill",value:function(e,t,i,r){return!(this.currentCount>=this.maxCount||!this.prefab)&&(this._type===v.Mesh?this.updateMesh(r):this.updateInstance(e,t,i),this.currentCount++,this._updated=!0,!0)}},{key:"endFill",value:function(){if(this._updated&&this.prefab){if(this._type===v.Mesh)for(var e=this._fixedMeshes,t=0;t<e.length;t++)e[t].update();else if(this._type===v.Instance){var i=this.node.children;if(i.length>this.maxCount)for(var r=i.length-1;r>=this.maxCount;r--)i[r].parent=null}this._updated=!1}}},{key:"updateMesh",value:function(e){var t=this._sourceMesh;if(t)for(var i=t.subCount(),r=0;r<i;r++){for(var s=this._fixedMeshes[r],n=t.getVertices(r),o=n.length,a=this.currentCount*o,c=0;c<o;c++){var l=n[c],p=a+c;s.writeVertex(p,"position",h.toArray(z,h.transformMat4(I,l.position,e))),s.writeVertex(p,"normal",h.toArray(z,h.transformMat4(P,l.position,e))),s.writeVertex(p,"tangent",u.toArray(R,u.transformMat4(O,l.tangent,e))),s.writeVertex(p,"uv",d.toArray(D,l.uv)),s.writeVertex(p,"uv1",d.toArray(D,l.uv1))}for(var f=t.triangles,_=f.length,m=this.currentCount*_,v=0;v<_;v++)s.writeIndex(m+v,a+f[v])}}},{key:"updateInstance",value:function(e,t,i){var r=this.node.children[this.currentCount];r||((r=cc.instantiate(this.prefab)).parent=this.node),r.position=e,r.scale=t,r.rotation=i}},{key:"prefab",get:function(){return this._prefab},set:function(e){this._prefab=e}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e}},{key:"maxCount",get:function(){return this._maxCount}},{key:"fixedMeshes",get:function(){return this._fixedMeshes}}]),e}()).prototype,"_prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(C.prototype,"_type",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Mesh}}),S=i(C.prototype,"_volume",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),i(C.prototype,"prefab",[M],Object.getOwnPropertyDescriptor(C.prototype,"prefab"),C.prototype),i(C.prototype,"volume",[j],Object.getOwnPropertyDescriptor(C.prototype,"volume"),C.prototype),i(C.prototype,"maxCount",[j],Object.getOwnPropertyDescriptor(C.prototype,"maxCount"),C.prototype),k=i(C.prototype,"_meshStructs",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=C))||b,o._RF.pop(),e("default",W)}}}));

System.register("chunks:///spline/src/comps/scatter/scatter-volume.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../utils/event.js","../../utils/mathf.js","../spline-util-base.js","../type.js"],(function(e,t){var i,n,o,r,u,s,l,p,c,a,h,d,y,v,f,_,g,m,C,b,k,P,w,j,W,D,O,z,A;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,o=e.classCallCheck,r=e.possibleConstructorReturn,u=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,p=e.createClass},function(e){c=e.cclegacy,a=e._decorator,h=e.Vec3},function(e){d=e.default},function(e){y=e.pointInPolygonAreaXZ,v=e.pointPolygonMinDistXZ},function(e){f=e.default},function(e){_=e.VolumeType}],execute:function(){c._RF.push({},"bbf2asYtpNNfqNmnARQpuH4","scatter-volume",void 0),W=a.ccclass,D=a.property,O=a.type,z=a.executeInEditMode,A=new h,e("ScatterVolume",(g=W("ScatterVolume"),m=O(_),g(C=z((k=i((b=function(e){function t(){var e,i;o(this,t);for(var n=arguments.length,p=new Array(n),c=0;c<n;c++)p[c]=arguments[c];return i=r(this,(e=u(t)).call.apply(e,[this].concat(p))),s(i,"_volume",k,l(i)),s(i,"_type",P,l(i)),s(i,"_lineWidth",w,l(i)),s(i,"_includeCap",j,l(i)),i.volumeChanged=new d,i}return n(t,e),p(t,[{key:"includePos",value:function(e){if(h.subtract(A,e,this.spline.node.getWorldPosition(A)),this._type===_.Area)return y(A,this.splineCurve.getPoints());if(this._type===_.Line){var t=this.splineCurve.getPoints(),i=v(A,t);if(i.dist>this._lineWidth)return!1;if(1===i.index||i.index===t.length-1){return i.t>=-.5&&i.t<=1.5}return!0}return!1}},{key:"onEnable",value:function(){this.spline.curveChanged.addListener(this.onCurveChanged,this)}},{key:"onDisable",value:function(){this.spline.curveChanged.removeListener(this.onCurveChanged,this)}},{key:"onCurveChanged",value:function(){this.volumeChanged.invoke()}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume!==e&&(this._volume=e,this.volumeChanged.invoke())}},{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,this.volumeChanged.invoke())}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(e){this._lineWidth!==e&&(this._lineWidth=e,this.volumeChanged.invoke())}},{key:"includeCap",get:function(){return this._includeCap},set:function(e){this._includeCap=e,this.volumeChanged.invoke()}}]),t}(f)).prototype,"_volume",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),i(b.prototype,"volume",[D],Object.getOwnPropertyDescriptor(b.prototype,"volume"),b.prototype),P=i(b.prototype,"_type",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.Area}}),i(b.prototype,"type",[m],Object.getOwnPropertyDescriptor(b.prototype,"type"),b.prototype),w=i(b.prototype,"_lineWidth",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),i(b.prototype,"lineWidth",[D],Object.getOwnPropertyDescriptor(b.prototype,"lineWidth"),b.prototype),j=i(b.prototype,"_includeCap",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i(b.prototype,"includeCap",[D],Object.getOwnPropertyDescriptor(b.prototype,"includeCap"),b.prototype),C=b))||C)||C)),c._RF.pop()}}}));

System.register("chunks:///spline/src/utils/raycast.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,r){var t,a,n,o,i,l,s,d,c,u,f,v,g,y,m,h,p,M,b;return{setters:[function(e){t=e.createForOfIteratorHelper},function(e){a=e.Layers,n=e.renderer,o=e.Mat4,i=e.Vec3,l=e.cclegacy,s=e.geometry,d=e.GFXPrimitiveMode}],execute:function(){l._RF.push({},"7881fXu+n9JkY6UxvBywBBF","raycast",void 0),c=s.intersect,u=s.ray,f=s.triangle,v=[],g=new o,y=new u,m=f.create(),h=new i,p=1/0,M=function(e,r,t,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if(p=n,t===d.TRIANGLE_LIST)for(var o=r.length,l=0;l<o;l+=3){var s=3*r[l],u=3*r[l+1],f=3*r[l+2];i.set(m.a,e[s],e[s+1],e[s+2]),i.set(m.b,e[u],e[u+1],e[u+2]),i.set(m.c,e[f],e[f+1],e[f+2]);var v=c.ray_triangle(y,m,a);v<=0||v>=p||(p=v)}else if(t===d.TRIANGLE_STRIP)for(var g=r.length-2,h=0,M=0;M<g;M+=1){var b=3*r[M-h],_=3*r[M+h+1],F=3*r[M+2];i.set(m.a,e[b],e[b+1],e[b+2]),i.set(m.b,e[_],e[_+1],e[_+2]),i.set(m.c,e[F],e[F+1],e[F+2]),h=~h;var I=c.ray_triangle(y,m,a);I<=0||I>=p||(p=I)}else if(t===d.TRIANGLE_FAN){var T=r.length-1,w=3*r[0];i.set(m.a,e[w],e[w+1],e[w+2]);for(var A=1;A<T;A+=1){var L=3*r[A],B=3*r[A+1];i.set(m.b,e[L],e[L+1],e[L+2]),i.set(m.c,e[B],e[B+1],e[B+2]);var E=c.ray_triangle(y,m,a);E<=0||E>=p||(p=E)}}},b={raycastAllModels:function(e,r){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Enum.DEFAULT,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;v.length=0;var d,u=t(e.models);try{for(u.s();!(d=u.n()).done;){var f=d.value,m=f.transform;if(m&&f.enabled&&f.node.layer&l&&f.worldBounds){var b=c.ray_aabb(r,f.worldBounds);if(!(b<=0||b>=s)){if(f.type===n.ModelType.DEFAULT){o.invert(g,m.getWorldMatrix(g)),i.transformMat4(y.o,r.o,g),i.normalize(y.d,i.transformMat4Normal(y.d,r.d,g)),b=1/0;for(var _=0;_<f.subModelNum;++_){var F=f.getSubModel(_).subMeshData;if(F&&F.geometricInfo){var I=F.geometricInfo,T=I.positions,w=I.indices,A=I.doubleSided;M(T,w,F.primitiveMode,A,s),b=Math.min(b,p*i.multiply(h,y.d,m.worldScale).length())}}}b<s&&v.push({node:f.node,distance:b})}}}}catch(e){u.e(e)}finally{u.f()}return v.sort((function(e,r){return e.distance-r.distance})),v}},l._RF.pop(),e("default",b)}}}));

System.register("chunks:///spline/src/editor/asset-operation.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,r){var t,n,a,s,i,o,u,c,p,d,f,h,v,w,l,m,_,b,g,y,x,R;return e({_createMesh:void 0,_saveMesh:void 0}),{setters:[function(e){t=e.asyncToGenerator},function(e){n=e.cclegacy,a=e.Mesh}],execute:function(){n._RF.push({},"4915a+F6HRKOqzthrteei1v","asset-operation",void 0),CC_EDITOR&&"undefined"==typeof BUILDER&&(o=function(){var e=t(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=p(r),s=_("zip"),i=[];a.on("error",(function(e){n(e)})),a.on("close",(function(){console.log("zip close"),e(new Uint8Array(i))})),s.on("data",(function(e){for(var r=0;r<e.length;r++)i.push(e[r])})),s.pipe(a),t.forEach((function(e){var r=m(e);s.append(c(e),{name:r.ext.substr(1)})})),s.finalize()})));case 1:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),u=window.require("fs-extra"),c=u.createReadStream,p=u.createWriteStream,d=u.ensureDirSync,f=u.existsSync,u.readdirSync,u.removeSync,h=u.writeFileSync,v=window.require("path"),w=v.dirname,l=v.join,m=v.parse,_=window.require("archiver"),b=window.require("os"),g=window.require("editor"),y=window.require("electron"),x=y.remote.getGlobal("Editor").Project.path,R=b.tmpdir(),s=function(){var e=t(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new a)._setRawAsset(".bin"),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),i=function(){var e=t(regeneratorRuntime.mark((function e(r,t){var n,a,s,i,u,c,p,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(x,"assets",r),t._setRawAsset(".bin"),t._dataLength=t.data.byteLength,n=EditorExtends.serialize(t),a=t.data,s=l(R,"creator/SaveMesh/__meshJson__.json"),i=l(R,"creator/SaveMesh/__meshBin__.bin"),u=l(R,"creator/SaveMesh/__meshZip__.zip"),d(w(s)),h(s,n),h(i,a),d(w(r)),e.next=14,o(u,[s,i]);case 14:return c=e.sent,e.next=17,g.Ipc.requestToPackage("asset-db","query-url-by-path",r);case 17:if(p=e.sent,!f(r)){e.next=26;break}return e.next=21,g.Ipc.requestToPackage("asset-db","query-asset-uuid",p);case 21:return v=e.sent,e.next=24,g.Ipc.requestToPackage("asset-db","save-asset",v,c);case 24:e.next=29;break;case 26:return e.next=28,g.Ipc.requestToPackage("asset-db","create-asset",p,c);case 28:v=e.sent;case 29:return e.abrupt("return",new Promise((function(e,r){setTimeout((function(){cc.AssetLibrary.loadAsset(v,(function(t,n){if(t)return r(t);e(n)}))}),500)})));case 30:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()),e("createMesh",s),e("saveMesh",i),n._RF.pop()}}}));

System.register("chunks:///spline/src/comps/scatter/scatter.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../utils/mathf.js","../../curve-sample.js","../spline-util-renderer.js","../type.js","./scatter-item.js","./scatter-volume.js","../../utils/raycast.js","../../editor/asset-operation.js"],(function(t,e){var r,i,n,o,a,s,u,c,l,h,p,y,d,_,f,m,g,v,b,C,w,O,M,L,P,I,V,k,T,j,R,z,x,D,Y,A,W,F,S,E,N,B,X,Q,U,Z,H,q,G,J,K,$,tt,et,rt,it,nt,ot,at,st,ut,ct,lt,ht,pt,yt,dt,_t,ft,mt,gt,vt,bt,Ct,wt,Ot,Mt,Lt,Pt;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_dec11:void 0,_dec12:void 0,_dec13:void 0,_dec14:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_descriptor9:void 0,_descriptor10:void 0,_descriptor11:void 0,_descriptor12:void 0,_descriptor13:void 0,_descriptor14:void 0,_descriptor15:void 0,_descriptor16:void 0,_temp:void 0}),{setters:[function(t){r=t.applyDecoratedDescriptor,i=t.inherits,n=t.classCallCheck,o=t.possibleConstructorReturn,a=t.getPrototypeOf,s=t.initializerDefineProperty,u=t.assertThisInitialized,c=t.createClass},function(t){l=t.cclegacy,h=t._decorator,p=t.Vec3,y=t.geometry,d=t.Mat4,_=t.Quat,f=t.Node,m=t.Terrain,g=t.Mesh,v=t.randomRange,b=t.Layers},function(t){C=t.pointPolygonMinDistXZ,w=t.pointInPolygonAreaXZ},function(t){O=t.default},function(t){M=t.default},function(t){L=t.VolumeType,P=t.ScatterType,I=t.VolumeInfo},function(t){V=t.default},function(t){k=t.ScatterVolume},function(t){T=t.default},function(t){j=t.saveMesh}],execute:function(){l._RF.push({},"8e456p1j4pC/ae9XLvfNodQ","scatter",void 0),lt=h.ccclass,ht=h.executeInEditMode,h.float,pt=h.type,h.boolean,yt=h.property,dt=new p(0,-1,0),_t=new p,ft=new p,mt=new p,gt=y.ray.create(),vt=new d,bt=new _,Ct=new d,wt=new p,Ot=new p,Mt=new p,Lt=new O,R=lt("Scatter"),z=pt(f),x=pt(m),D=pt(f),Y=pt(k),A=pt(k),W=pt(V),F=pt(V),S=pt(L),E=pt(L),N=pt(g),B=pt(g),X=pt(P),Q=pt(P),Pt=R(U=ht((H=r((Z=function(t){function e(){var t,r;n(this,e);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=o(this,(t=a(e)).call.apply(t,[this].concat(c))),s(r,"_scale",H,u(r)),s(r,"_scaleRange",q,u(r)),s(r,"_rotationY",G,u(r)),s(r,"_rotationYRange",J,u(r)),s(r,"_itemCount",K,u(r)),s(r,"_generateCountPerFrame",$,u(r)),s(r,"_raycastLayer",tt,u(r)),s(r,"_raycastTerrain",et,u(r)),r._currentItemCount=0,r._volumeInfos=[],r._selfVolumeInfo=new I,s(r,"_volumes",rt,u(r)),s(r,"_items",it,u(r)),s(r,"_type",nt,u(r)),s(r,"_scatterLineWidth",ot,u(r)),s(r,"_scatterLineOffset",at,u(r)),s(r,"_cacheToMesh",st,u(r)),s(r,"_virtualMesh",ut,u(r)),s(r,"_dataType",ct,u(r)),r._hasValidItem=!1,r}return i(e,t),c(e,[{key:"_onDirtyChanged",value:function(t){t?(this._updateVolume(),this._dirty=!0):this._currentItemCount>=this._itemCount&&(this._dirty=!1)}},{key:"onLoad",value:function(){this._cacheToMesh&&this._virtualMesh&&this._initWidthVirtualMesh()}},{key:"_initWidthVirtualMesh",value:function(){for(var t=this.generated.children,e=this._items,r=0;r<e.length;r++)e[r].initWithVirtualMesh(t[r],this.cacheVirtualMesh);this.dirty=!1}},{key:"_isPosValid",value:function(t){var e=!1;if(this._type===L.Line){var r=C(t,this.spline.getPoints()).dist;e=r>this._scatterLineOffset&&r<this.scatterLineOffset+this.scatterLineWidth}else this._type===L.Area&&(e=w(t,this.spline.getPoints()));if(!e)return!1;p.transformMat4(t,t,this.spline.node.worldMatrix);for(var i=this._volumes,n=this._volumeInfos,o=!1,a=0,s=0;s<i.length;s++){var u=i[s];if(u){var c=n[s];if(u.includePos(t)){if(a++,c.count>=c.maxCount)continue;o=!0,c.count++;break}}}return 0===a&&this._selfVolumeInfo.count<this._selfVolumeInfo.maxCount&&(o=!0,this._selfVolumeInfo.count++),o}},{key:"_getRandomAreaPoint",value:function(){var t=Ot,e=Mt;this.spline.getBounding(t,e);var r=0;do{if(r>=10)return null;_t.x=v(t.x,e.x),_t.y=v(t.y,e.y),_t.z=v(t.z,e.z),r++}while(!this._isPosValid(_t));return _t}},{key:"_getRandomLinePint",value:function(){var t=this.spline.length,e=this.spline.getSampleAtDistance(v(0,t),Lt);_t.set(e.location);var r=wt.set(-e.tangent.z,0,e.tangent.x),i=v(-this._scatterLineWidth,this.scatterLineWidth),n=Math.sign(i)*this._scatterLineOffset+i;return r.multiplyScalar(n),_t.add(r),p.transformMat4(_t,_t,this.spline.node.worldMatrix),_t}},{key:"_getNextPosition",value:function(){var t;if(this._type===L.Area?t=this._getRandomAreaPoint():this._type===L.Line&&(t=this._getRandomLinePint()),!t)return null;if(gt.o.set(t.x,t.y+1e3,t.z),gt.d.set(dt),this._raycastTerrain){var e=this._raycastTerrain.rayCheck(gt.o,gt.d,1,!0);e&&p.add(t,e,this._raycastTerrain.node.getWorldPosition(t))}else{var r=b.Enum.DEFAULT;this._raycastLayer&&(r=this._raycastLayer.layer);var i=T.raycastAllModels(cc.director._scene._renderScene,gt,r);i.length>0&&(t=t,p.scaleAndAdd(t,gt.o,gt.d,i[0].distance))}return p.transformMat4(t,t,Ct),t}},{key:"compute",value:function(){if(!(this._items.length<=0)&&this._hasValidItem)if(d.invert(Ct,this.node.worldMatrix),this._currentItemCount<this._itemCount){for(var t=this._items,e=0;e<this._generateCountPerFrame&&!(this._currentItemCount>=this._itemCount);e++){var r=this._getNextPosition();if(r){ft.set(this.scale.x+Math.random()*this.scaleRange.x,this.scale.y+Math.random()*this.scaleRange.y,this.scale.z+Math.random()*this.scaleRange.z);var i=Math.random()*(this.rotationY+this.rotationYRange);mt.set(0,i,0),_.fromEuler(bt,mt.x,mt.y,mt.z),d.fromRTS(vt,bt,r,ft);for(var n=0;n<t.length;n++)if(t[n].fill(r,ft,bt,vt)){this._currentItemCount++;break}}}for(var o=0;o<t.length;o++)t[o].endFill();this._currentItemCount>=this._itemCount&&this._saveToCache()}else this.dirty=!1}},{key:"_saveToCache",value:function(){var t=this;if(this.cacheToMesh&&CC_EDITOR){for(var e=0,r=0;r<this.items.length;r++)for(var i=this.items[r],n=0;n<i.fixedMeshes.length;n++){e+=i.fixedMeshes[n].mesh.data.byteLength}for(var o=new Uint8Array(e),a=0,s=0;s<this.items.length;s++)for(var u=this.items[s],c=0;c<u.fixedMeshes.length;c++){u.shiftStructOffset(a);var l=u.fixedMeshes[c].mesh;o.set(l.data,a),a+=l.data.byteLength}var h=new g;h.reset({struct:{vertexBundles:[],primitives:[]},data:o}),j("_scatter-cache-data_/"+this.uuid+".mesh",h).then((function(e){t._virtualMesh=e}))}}},{key:"_resetState",value:function(){this._dirtyTime=0,this._currentItemCount=0;var t=this._items;if(t)for(var e=0;e<t.length;e++)t[e].currentCount=0;var r=this._volumeInfos;if(r)for(var i=0;i<r.length;i++)r[i].count=0;this._selfVolumeInfo&&(this._selfVolumeInfo.count=0)}},{key:"_updateVolume",value:function(){this._resetState();var t=this._volumeInfos;t.length=0;for(var e=0,r=0;r<this._volumes.length;r++){var i=this._volumes[r],n=new I;i?(i.volumeChanged.addListener(this._updateVolume,this),n.volume=i.volume):n.volume=0,t[r]=n,e+=n.volume}for(var o=0;o<t.length;o++){var a=t[o];e?e>1&&(a.volume/=e):a.volume=0,a.maxCount=a.volume*this.itemCount}this._selfVolumeInfo.count=0,this._selfVolumeInfo.volume=Math.max(0,1-e),this._selfVolumeInfo.maxCount=this._selfVolumeInfo.volume*this.itemCount,this._dirty=!0,this._updateItems()}},{key:"_updateItems",value:function(){this.generated.removeAllChildren(),this._hasValidItem=!1;for(var t=0,e=this._items,r=0;r<e.length;r++){e[r].prefab&&(t+=e[r].volume,this._hasValidItem=!0)}if(0===t&&(this._hasValidItem=!1),this._hasValidItem){for(var i=this.generated.children,n=0,o=0;o<e.length;o++){var a=e[o];if(a.prefab){var s=a.volume;t?s/=t:s=0;var u=i[o];u||((u=new f("ScatterItem")).parent=this.generated);var c=s*this.itemCount|0;o===e.length-1&&(c=this.itemCount-n),a.init(u,c,this._dataType),n+=c}}this._dirty=!0}}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.dirty=!0}},{key:"scaleRange",get:function(){return this._scaleRange},set:function(t){this._scaleRange=t,this.dirty=!0}},{key:"rotationY",get:function(){return this._rotationY},set:function(t){this._rotationY=t,this.dirty=!0}},{key:"rotationYRange",get:function(){return this._rotationYRange},set:function(t){this._rotationYRange=t,this.dirty=!0}},{key:"itemCount",get:function(){return this._itemCount},set:function(t){this._itemCount!==t&&(this._itemCount=t,this.dirty=!0)}},{key:"generateCountPerFrame",get:function(){return this._generateCountPerFrame},set:function(t){this._generateCountPerFrame=t}},{key:"raycastLayer",set:function(t){this._raycastLayer=t,this._raycastLayer?this._raycastTerrain=this._raycastLayer.getComponent(m):this._raycastTerrain=null},get:function(){return this._raycastLayer}},{key:"currentItemCount",get:function(){return this._currentItemCount}},{key:"volumes",get:function(){return this._volumes},set:function(t){for(var e=this._volumes,r=0;r<e.length;r++)e[r]&&e[r].volumeChanged.removeListener(this._updateVolume,this);this._volumes=t,this._updateVolume()}},{key:"items",get:function(){return this._items},set:function(t){this._items=t,this._updateVolume()}},{key:"type",get:function(){return this._type},set:function(t){this._type=t,this._updateVolume()}},{key:"scatterLineWidth",get:function(){return this._scatterLineWidth},set:function(t){this._scatterLineWidth=t,this.dirty=!0}},{key:"scatterLineOffset",get:function(){return this._scatterLineOffset},set:function(t){this._scatterLineOffset=t,this.dirty=!0}},{key:"cacheToMesh",get:function(){return this._cacheToMesh},set:function(t){this._cacheToMesh=t,this.dirty=!0}},{key:"cacheVirtualMesh",get:function(){return this._virtualMesh}},{key:"dataType",get:function(){return this._dataType},set:function(t){this._dataType=t,this.dirty=!0}},{key:"generated",get:function(){if(!this._generated||this._generated.parent!==this.node){var t="generated "+cc.js.getClassName(this);this._generated=cc.find(t,this.node),this._generated||(this._generated=new f(t),this._generated.parent=this.node)}return this._generated}}]),e}(M)).prototype,"_scale",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.ONE.clone()}}),q=r(Z.prototype,"_scaleRange",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),G=r(Z.prototype,"_rotationY",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=r(Z.prototype,"_rotationYRange",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),r(Z.prototype,"scale",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"scale"),Z.prototype),r(Z.prototype,"scaleRange",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"scaleRange"),Z.prototype),r(Z.prototype,"rotationY",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"rotationY"),Z.prototype),r(Z.prototype,"rotationYRange",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"rotationYRange"),Z.prototype),K=r(Z.prototype,"_itemCount",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),$=r(Z.prototype,"_generateCountPerFrame",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),r(Z.prototype,"itemCount",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"itemCount"),Z.prototype),r(Z.prototype,"generateCountPerFrame",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"generateCountPerFrame"),Z.prototype),tt=r(Z.prototype,"_raycastLayer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=r(Z.prototype,"_raycastTerrain",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r(Z.prototype,"raycastLayer",[D],Object.getOwnPropertyDescriptor(Z.prototype,"raycastLayer"),Z.prototype),r(Z.prototype,"currentItemCount",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"currentItemCount"),Z.prototype),rt=r(Z.prototype,"_volumes",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r(Z.prototype,"volumes",[A],Object.getOwnPropertyDescriptor(Z.prototype,"volumes"),Z.prototype),it=r(Z.prototype,"_items",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r(Z.prototype,"items",[F],Object.getOwnPropertyDescriptor(Z.prototype,"items"),Z.prototype),nt=r(Z.prototype,"_type",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.Area}}),r(Z.prototype,"type",[E],Object.getOwnPropertyDescriptor(Z.prototype,"type"),Z.prototype),ot=r(Z.prototype,"_scatterLineWidth",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),r(Z.prototype,"scatterLineWidth",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"scatterLineWidth"),Z.prototype),at=r(Z.prototype,"_scatterLineOffset",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r(Z.prototype,"scatterLineOffset",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"scatterLineOffset"),Z.prototype),st=r(Z.prototype,"_cacheToMesh",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),r(Z.prototype,"cacheToMesh",[yt],Object.getOwnPropertyDescriptor(Z.prototype,"cacheToMesh"),Z.prototype),ut=r(Z.prototype,"_virtualMesh",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r(Z.prototype,"cacheVirtualMesh",[B],Object.getOwnPropertyDescriptor(Z.prototype,"cacheVirtualMesh"),Z.prototype),ct=r(Z.prototype,"_dataType",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.Mesh}}),r(Z.prototype,"dataType",[Q],Object.getOwnPropertyDescriptor(Z.prototype,"dataType"),Z.prototype),U=Z))||U)||U,l._RF.pop(),t("default",Pt)}}}));

System.register("chunks:///spline/src/comps/sower.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","./spline-util-renderer.js"],(function(t,e){var r,i,o,n,a,s,c,p,l,f,u,g,y,h,d,_,b,v,R,m,w,O,z,D,P,j,k,M,C,x,E,S,A;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(t){r=t.applyDecoratedDescriptor,i=t.inherits,o=t.classCallCheck,n=t.possibleConstructorReturn,a=t.getPrototypeOf,s=t.initializerDefineProperty,c=t.assertThisInitialized,p=t.createClass},function(t){l=t.cclegacy,f=t._decorator,u=t.Quat,g=t.Prefab,y=t.Vec3},function(t){h=t.default}],execute:function(){l._RF.push({},"3c449aeMnlEoqzv7EJdDtvX","sower",void 0),k=f.ccclass,M=f.executeInEditMode,C=f.float,x=f.type,f.boolean,E=f.property,S=new u,d=x(g),_=x(g),A=k(b=M((R=r((v=function(t){function e(){var t,r;o(this,e);for(var i=arguments.length,p=new Array(i),l=0;l<i;l++)p[l]=arguments[l];return r=n(this,(t=a(e)).call.apply(t,[this].concat(p))),s(r,"_spacing",R,c(r)),s(r,"_spacingRange",m,c(r)),s(r,"_offset",w,c(r)),s(r,"_offsetRange",O,c(r)),s(r,"_scale",z,c(r)),s(r,"_scaleRange",D,c(r)),s(r,"_rotation",P,c(r)),s(r,"_prefab",j,c(r)),r}return i(e,t),p(e,[{key:"compute",value:function(){var t=this.generated.children;if(!(this.spacing+this.spacingRange<=0||null==this.prefab)){for(var e=0,r=this.splineCurve,i=0;e<=r.length;){var o=r.getSampleAtDistance(e),n=t[i];n||((n=cc.instantiate(this.prefab)).parent=this.generated);var a=this.scale+Math.random()*this.scaleRange;a*=Math.min(o.scale.x,o.scale.y),n.setScale(a,a,a),u.fromEuler(S,this.rotation.x,this.rotation.y,this.rotation.z),u.multiply(S,o.rotation,S),n.setRotation(S);var s=y.transformQuat(cc.v3(),cc.Vec3.RIGHT,u.fromViewUp(cc.quat(),o.tangent,o.up)).normalize(),c=this.offset+Math.random()*this.offsetRange*Math.sign(this.offset);c*=o.scale.x,s.multiplyScalar(c),n.position=s.add(o.location),e+=this.spacing+Math.random()*this.spacingRange,i++}if(t.length>i)for(var p=t.length-1;p>=i;p--)t[p].parent=null}}},{key:"spacing",get:function(){return this._spacing},set:function(t){this._spacing=t,this.dirty=!0}},{key:"spacingRange",get:function(){return this._spacingRange},set:function(t){this._spacingRange=t,this.dirty=!0}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t,this.dirty=!0}},{key:"offsetRange",get:function(){return this._offsetRange},set:function(t){this._offsetRange=t,this.dirty=!0}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this.dirty=!0}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},{key:"scaleRange",get:function(){return this._scaleRange},set:function(t){this._scaleRange=t,this.dirty=!0}},{key:"prefab",get:function(){return this._prefab},set:function(t){this._prefab=t,this.generated.removeAllChildren(),this.dirty=!0}}]),e}(h)).prototype,"_spacing",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),m=r(v.prototype,"_spacingRange",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=r(v.prototype,"_offset",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=r(v.prototype,"_offsetRange",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=r(v.prototype,"_scale",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=r(v.prototype,"_scaleRange",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=r(v.prototype,"_rotation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),j=r(v.prototype,"_prefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r(v.prototype,"spacing",[C],Object.getOwnPropertyDescriptor(v.prototype,"spacing"),v.prototype),r(v.prototype,"spacingRange",[C],Object.getOwnPropertyDescriptor(v.prototype,"spacingRange"),v.prototype),r(v.prototype,"offset",[C],Object.getOwnPropertyDescriptor(v.prototype,"offset"),v.prototype),r(v.prototype,"offsetRange",[C],Object.getOwnPropertyDescriptor(v.prototype,"offsetRange"),v.prototype),r(v.prototype,"scale",[C],Object.getOwnPropertyDescriptor(v.prototype,"scale"),v.prototype),r(v.prototype,"rotation",[E],Object.getOwnPropertyDescriptor(v.prototype,"rotation"),v.prototype),r(v.prototype,"scaleRange",[C],Object.getOwnPropertyDescriptor(v.prototype,"scaleRange"),v.prototype),r(v.prototype,"prefab",[_],Object.getOwnPropertyDescriptor(v.prototype,"prefab"),v.prototype),b=v))||b)||b,l._RF.pop(),t("default",A)}}}));

System.register("chunks:///spline/src/editor/utils.js",["cc","../utils/mesh-processing/mesh-utility.js"],(function(e,t){var n,o,i,r,c,s,a;function u(e){var t=new cc.Node(e);return t._layer=cc.Layers.Enum.GIZMOS,t.modelColor=cc.color(),t}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.getWorldMatrix(s),o.invert(s,s),r?i.transformMat4Normal(n||new i,t,s):i.transformMat4(n||new i,t,s)}function l(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.getWorldMatrix(s),o?i.transformMat4Normal(n||new i,t,s):i.transformMat4(n||new i,t,s)}function v(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return l(e,n,o,i),d(t,o,o,i),o}return e({callGizmoFunction:function e(t){window.cce&&(window.cce.gizmos?t():setTimeout((function(){e(t)}),500))},create3DNode:u,createLineShape:function(e,t){var n=window.cce.gizmos.EngineUtils,o=(n.createMesh,n.addMeshToNode),i=n.setMeshColor;n.AttributeName,n.updateVBAttr,n.updateIBAttr,e=e||"Line",t=t||cc.Color.WHITE;var s=c.createMesh({positions:[cc.v3(0,0),cc.v3(0,1),cc.v3(1,0),cc.v3(1,1)],indices:[0,1,1,2,2,3],primitiveType:cc.GFXPrimitiveMode.LINE_LIST}),a=u(e);o(a,s),i(a,t);var d=a.getComponent(r),l=[];return a.updatePoints=function(e){l.length=0;for(var t=1;t<e.length;t++)l.push(t-1,t);c.updateOrCreateModelMesh(d,{positions:e,indices:l,primitiveType:cc.GFXPrimitiveMode.LINE_LIST})},a},getNodeLocalPostion:d,getNodeWorldPostion:l,node2nodeLength:function(e,t,n){return a.set(n,0,0),v(e,t,a,a,!0),a.length()},node2nodePos:v}),{setters:[function(e){n=e.cclegacy,o=e.Mat4,i=e.Vec3,r=e.ModelComponent},function(e){c=e.default}],execute:function(){n._RF.push({},"976acvUf6FG467gA3kK0MNs","utils",void 0),s=new o,a=new i,n._RF.pop()}}}));

System.register("chunks:///spline/src/comps/terrain/terrain-sculpt.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","../../utils/mathf.js","../../utils/mesh-processing/mesh-vertex.js","../../curve-sample.js","../../spline.js","../spline-util-renderer.js","../../utils/animation-curve.js","../type.js","../scatter/scatter-volume.js","../../editor/utils.js"],(function(e,t){var i,r,o,n,s,a,l,c,u,p,h,d,f,v,y,_,g,m,b,O,T,w,C,D,S,j,W,k,z,P,N,x,H,B,M,V,R,F,I,A,G,L,X,Q,Y,Z,q,E,J,K,U,$,ee,te,ie;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_dec9:void 0,_dec10:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,o=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass,u=e.createForOfIteratorHelper},function(e){p=e.cclegacy,h=e._decorator,d=e.Vec2,f=e.Vec3,v=e.CurveRange,y=e.Terrain,_=e.clamp},function(e){g=e.pointPolygonMinDistXZ},function(e){m=e.default},function(e){b=e.default},function(e){O=e.default},function(e){T=e.default},function(e){w=e.default},function(e){C=e.VolumeType},function(e){D=e.ScatterVolume},function(e){S=e.node2nodePos,j=e.getNodeWorldPostion}],execute:function(){p._RF.push({},"075aejG0z5GtrxYCQTb/NXl","terrain-sculpt",void 0),q=h.ccclass,E=h.property,J=h.type,K=new b,U=new m,$=new d,ee=new f,te=new f,ie=new f,e("TerrainSculpt",(W=q("TerrainSculpt"),k=J(C),z=J(C),P=J(v),N=J(v),x=J(D),H=J(D),B=J(y),M=J(y),V=E({editorOnly:!0}),W((I=i((F=function(e){function t(){var e,i;o(this,t);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return i=n(this,(e=s(t)).call.apply(e,[this].concat(c))),a(i,"_volumeType",I,l(i)),a(i,"_lineWidth",A,l(i)),a(i,"_lineSmoothWidth",G,l(i)),a(i,"_lineSmootCurve",L,l(i)),a(i,"_heightOffset",X,l(i)),a(i,"_volumes",Q,l(i)),a(i,"_terrain",Y,l(i)),i.dirtyWhenSplineMoved=!0,a(i,"_originTerrainData",Z,l(i)),i._clearCacheOldTerrainData=!1,i}return r(t,e),c(t,[{key:"testBlocks",value:function(e,t,i){var r,o=u(this._terrain.getBlocks());try{for(o.s();!(r=o.n()).done;){var n=r.value,s=n.getRect();$.set(e,t),s.contains($)&&(i.includes(n)||i.push(n))}}catch(e){o.e(e)}finally{o.f()}}},{key:"calcVolumeHeight",value:function(e,t){for(var i=this.volumes,r=0;r<i.length;r++)i[r]&&i[r].includePos(e)&&(t*=i[r].volume);return t}},{key:"compute",value:function(){var e=this.splineCurve,t=this.terrain;if(e&&t){var i=new Array,r=this._originTerrainData,o={};if(this._volumeType===C.Line){var n=this.lineSmoothWidth,s=this.lineWidth,a=s+n,l=t.vertexCount,c=this.lineSmootCurve,u=t.tileSize;e.getBounding(te,ie),te.x-=a,te.z-=a,ie.x+=a,ie.z+=a,S(this.spline.node,this.terrain.node,te,te),S(this.spline.node,this.terrain.node,ie,ie);var p=te.x,h=te.z,d=ie.x,f=ie.z;if(p=Math.floor(p/u),h=Math.floor(h/u),d=Math.floor(d/u),f=Math.floor(f/u),p>l[0]-1||d<0)return;if(h>l[1]-1||f<0)return;p=_(p,0,l[0]-1),h=_(h,0,l[1]-1),d=_(d,0,l[0]-1),f=_(f,0,l[1]-1);for(var v=e.getPoints(),y=this.heightOffset,m=h;m<=f;m++)for(var b=p;b<=d;b++){ee.set(b*u,0,m*u),S(this.terrain.node,this.spline.node,ee,ee);var T=g(ee,v),w=T.dist;if(!(w>a)){var D=_((T.index-1+T.t)/(v.length-1),0,1)*(this.splineCurve instanceof O?this.spline.curves.length:1);e.getSample(D,K),U.position.set(0,0,w),K.getBent(U,U),S(this.spline.node,this.terrain.node,U.position,U.position);var W=U.position.y;if(w>s){var k=(w-s)/n;W*=c.evaluate(k,.5)}j(this.terrain.node,U.position,U.position),W=this.calcVolumeHeight(U.position,W),W+=y;var z="".concat(b,"_").concat(m);if(!o[z]){if(!r[z]){var P=t.getNormal(b,m);r[z]=[t.getHeight(b,m),P]}o[z]=!0,t.setHeight(b,m,W),this.testBlocks(b,m,i)}}}}for(var N in o){var x=N.split("_"),H=Number(x[0]),B=Number(x[1]),M=t._calcNormal(H,B);t._setNormal(H,B,M)}for(var V in r)if(!o[V]){var R=V.split("_"),F=Number(R[0]),I=Number(R[1]),A=r[V];t.setHeight(F,I,A[0]),t._setNormal(F,I,A[1]),this.testBlocks(F,I,i),delete r[V]}for(var G=0,L=i;G<L.length;G++){L[G]._updateHeight()}}}},{key:"volumeType",get:function(){return this._volumeType},set:function(e){this._volumeType=e,this.dirty=!0}},{key:"lineWidth",get:function(){return this._lineWidth},set:function(e){this._lineWidth=e,this.dirty=!0}},{key:"lineSmoothWidth",get:function(){return this._lineSmoothWidth},set:function(e){this._lineSmoothWidth=e,this.dirty=!0}},{key:"lineSmootCurve",get:function(){return this._lineSmootCurve},set:function(e){this._lineSmootCurve=e,e&&(e.curve.postWrapMode=1),this.dirty=!0}},{key:"heightOffset",get:function(){return this._heightOffset},set:function(e){this._heightOffset=e,this.dirty=!0}},{key:"volumes",get:function(){return this._volumes},set:function(e){this._volumes=e,this.dirty=!0}},{key:"terrain",get:function(){return this._terrain},set:function(e){this._terrain=e,this._originTerrainData={},this.dirty=!0}},{key:"clearCacheOldTerrainData",get:function(){return this._clearCacheOldTerrainData},set:function(e){this._originTerrainData={},this.terrain._asset=this.terrain._asset,this._clearCacheOldTerrainData=e,this.dirty=!0}}]),t}(T)).prototype,"_volumeType",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.Line}}),i(F.prototype,"volumeType",[z],Object.getOwnPropertyDescriptor(F.prototype,"volumeType"),F.prototype),A=i(F.prototype,"_lineWidth",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),i(F.prototype,"lineWidth",[E],Object.getOwnPropertyDescriptor(F.prototype,"lineWidth"),F.prototype),G=i(F.prototype,"_lineSmoothWidth",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),i(F.prototype,"lineSmoothWidth",[E],Object.getOwnPropertyDescriptor(F.prototype,"lineSmoothWidth"),F.prototype),L=i(F.prototype,"_lineSmootCurve",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.easeInOut(0,1,1,0)}}),i(F.prototype,"lineSmootCurve",[N],Object.getOwnPropertyDescriptor(F.prototype,"lineSmootCurve"),F.prototype),X=i(F.prototype,"_heightOffset",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i(F.prototype,"heightOffset",[E],Object.getOwnPropertyDescriptor(F.prototype,"heightOffset"),F.prototype),Q=i(F.prototype,"_volumes",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i(F.prototype,"volumes",[H],Object.getOwnPropertyDescriptor(F.prototype,"volumes"),F.prototype),Y=i(F.prototype,"_terrain",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i(F.prototype,"terrain",[M],Object.getOwnPropertyDescriptor(F.prototype,"terrain"),F.prototype),Z=i(F.prototype,"_originTerrainData",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i(F.prototype,"clearCacheOldTerrainData",[E],Object.getOwnPropertyDescriptor(F.prototype,"clearCacheOldTerrainData"),F.prototype),R=F))||R)),p._RF.pop()}}}));

System.register("chunks:///spline/src/editor/base/controller.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","../utils.js"],(function(e,o){var t,n,r,l,i;return{setters:[function(e){t=e.createClass,n=e.classCallCheck},function(e){r=e.cclegacy},function(e){l=e.callGizmoFunction}],execute:function(){r._RF.push({},"aa4a2A2+8hPZLJSXNh0jqHD","controller",void 0),i=function(){function e(o){n(this,e),this.shape=null,cc.js.addon(this,new window.cce.gizmos.ControllerBase(o))}return t(e,[{key:"createShapeNode",value:function(e){return window.cce.gizmos.ControllerBase.prototype.createShapeNode.call(this,e)}},{key:"initAxis",value:function(e,o){return window.cce.gizmos.ControllerBase.prototype.initAxis.call(this,e,o)}},{key:"updateController",value:function(){return window.cce.gizmos.ControllerBase.prototype.updateController.call(this)}},{key:"show",value:function(){return window.cce.gizmos.ControllerBase.prototype.show.call(this)}},{key:"hide",value:function(){return window.cce.gizmos.ControllerBase.prototype.hide.call(this)}},{key:"registerCameraMovedEvent",value:function(){return window.cce.gizmos.ControllerBase.prototype.registerCameraMovedEvent.call(this)}},{key:"unregisterCameraMoveEvent",value:function(){return window.cce.gizmos.ControllerBase.prototype.unregisterCameraMoveEvent.call(this)}},{key:"adjustControllerSize",value:function(){return window.cce.gizmos.ControllerBase.prototype.adjustControllerSize.call(this)}}]),t(e,[{key:"onControllerMouseDown",value:function(e){}},{key:"onControllerMouseMove",value:function(e){}},{key:"onControllerMouseUp",value:function(e){}},{key:"onMouseDown",value:function(e){this.onControllerMouseDown(e)}},{key:"onMouseMove",value:function(e){this.onControllerMouseMove(e)}},{key:"onMouseUp",value:function(e){this.onControllerMouseUp(e)}},{key:"onMouseLeave",value:function(e){this.onMouseUp(e)}}]),e}(),CC_EDITOR&&l((function(){Object.setPrototypeOf(i.prototype,window.cce.gizmos.ControllerBase.prototype)})),r._RF.pop(),e("default",i)}}}));

System.register("chunks:///spline/src/editor/base/gizmo.js",["../../../../_virtual/_rollupPluginBabelHelpers.js","cc","../utils.js"],(function(o,e){var t,n,i,r,a;return{setters:[function(o){t=o.createClass,n=o.classCallCheck},function(o){i=o.cclegacy},function(o){r=o.callGizmoFunction}],execute:function(){i._RF.push({},"ec920DofWZHA6zPB49x/+7d","gizmo",void 0),a=function(){function o(e){n(this,o),this._showTransformGizmo=!0,cc.js.addon(this,new window.cce.gizmos.Gizmo(e))}return t(o,[{key:"getGizmoRoot",value:function(){return window.cce.gizmos.Gizmo.prototype.getGizmoRoot.call(this)}},{key:"recordChanges",value:function(){return window.cce.gizmos.Gizmo.prototype.recordChanges.call(this)}},{key:"commitChanges",value:function(){return window.cce.gizmos.Gizmo.prototype.commitChanges.call(this)}},{key:"onComponentChanged",value:function(o){return window.cce.gizmos.Gizmo.prototype.onComponentChanged.call(this,o)}},{key:"registerCameraMovedEvent",value:function(){return window.cce.gizmos.Gizmo.prototype.registerCameraMovedEvent.call(this)}},{key:"unregisterCameraMoveEvent",value:function(){return window.cce.gizmos.Gizmo.prototype.unregisterCameraMoveEvent.call(this)}},{key:"target",get:function(){return this._target},set:function(o){var e=this.nodes;e&&e.length,this._target=o,(e=this.nodes)&&e.length>0?this.onTargetUpdate&&this.onTargetUpdate():this.hide()}}],[{key:"register",value:function(o,e){r((function(){window.cce.gizmos.GizmoDefines.components[o]=e}))}}]),t(o,[{key:"layer",value:function(){return"foreground"}},{key:"updateController",value:function(){this.updateControllerData(),this.updateControllerTransform()}},{key:"updateControllerData",value:function(){}},{key:"updateControllerTransform",value:function(){}},{key:"onTargetUpdate",value:function(){this.updateController()}},{key:"onNodeChanged",value:function(){this.updateController()}},{key:"showTransformGizmo",value:function(o){this._showTransformGizmo=o}},{key:"getTransformGizmoNode",value:function(){var o=window.cce.gizmos.transformTool;return o&&o.node}},{key:"show",value:function(){window.cce.gizmos.Gizmo.prototype.show.call(this)}},{key:"onUpdate",value:function(){this._showTransformGizmo?window.cce.gizmos.transformTool.show():window.cce.gizmos.transformTool.hide()}},{key:"commitNodeChanged",value:function(o){for(var e,t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(e=cce.gizmos.Utils).onNodeChanged.apply(e,[o].concat(n))}}]),o}(),CC_EDITOR&&r((function(){Object.setPrototypeOf(a.prototype,window.cce.gizmos.Gizmo.prototype)})),i._RF.pop(),o("default",a)}}}));

System.register("chunks:///spline/src/editor/continuous-line-controller.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","./utils.js","./base/controller.js"],(function(e,n){var t,i,s,o,u,l,r,c,a;return{setters:[function(e){t=e.inherits,i=e.createClass,s=e.classCallCheck,o=e.possibleConstructorReturn,u=e.getPrototypeOf},function(e){l=e.cclegacy},function(e){r=e.createLineShape},function(e){c=e.default}],execute:function(){l._RF.push({},"c404dqgha9J1YgpZRVg/sHq","continuous-line-controller",void 0),a=function(e){function n(e){var t;return s(this,n),(t=o(this,u(n).call(this,e)))._lineShape=null,t.initShape(),t}return t(n,e),i(n,[{key:"initShape",value:function(){this.createShapeNode("ContinuousLineController"),this._lineShape=r("Continuous Line"),this._lineShape.parent=this.shape}},{key:"updatePoints",value:function(e){this._lineShape.updatePoints(e)}}]),n}(c),l._RF.pop(),e("default",a)}}}));

System.register("chunks:///spline/src/editor/types.js",["cc"],(function(e,i){var n,o;return e("SplineMoveType",void 0),{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f04a0j9OINCgrkh0zdhdXrp","types",void 0),function(e){e[e.None=0]="None",e[e.Node=1]="Node",e[e.Position=2]="Position",e[e.Direction=3]="Direction",e[e.InvDirection=4]="InvDirection"}(o||e("SplineMoveType",o={})),n._RF.pop()}}}));

System.register("chunks:///spline/src/editor/spline-node-controller.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","./utils.js","./base/controller.js","./types.js"],(function(i,e){var t,o,n,s,r,c,l,d,h,a,u,p;return{setters:[function(i){t=i.inherits,o=i.createClass,n=i.classCallCheck,s=i.possibleConstructorReturn,r=i.getPrototypeOf},function(i){c=i.cclegacy,l=i.Color},function(i){d=i.createLineShape,h=i.getNodeWorldPostion},function(i){a=i.default},function(i){u=i.SplineMoveType}],execute:function(){c._RF.push({},"055a8DTQf1L86joS8tyMPw+","spline-node-controller",void 0),10,p=function(i){function e(i){var t;return n(this,e),(t=s(this,r(e).call(this,i)))._node=null,t._splineNode=null,t._directionLineShape=null,t.positionNode=null,t.directionNode=null,t.invDirectionNode=null,t.initShape(),t}return t(e,i),o(e,[{key:"initShape",value:function(){this.createShapeNode("BoxController");var i=window.cce.gizmos.ControllerUtils.cube(10,10,10,l.YELLOW);i.parent=this.shape,this.positionNode=i,this.initAxis(i,u.Position),(i=window.cce.gizmos.ControllerUtils.cube(10,10,10,l.YELLOW)).parent=this.shape,this.directionNode=i,this.initAxis(i,u.Direction),(i=window.cce.gizmos.ControllerUtils.cube(10,10,10,l.YELLOW)).parent=this.shape,this.invDirectionNode=i,this.initAxis(i,u.InvDirection),this._directionLineShape=d("Direction Line",l.RED),this._directionLineShape.parent=this.shape,this.hide()}},{key:"onShow",value:function(){this.registerCameraMovedEvent(),this.hideDirection()}},{key:"onHide",value:function(){this.unregisterCameraMoveEvent()}},{key:"showDirection",value:function(){this.directionNode.active=!0,this.invDirectionNode.active=!0,this._directionLineShape.active=!0,this.updateLineMesh()}},{key:"hideDirection",value:function(){this.directionNode.active=!1,this.invDirectionNode.active=!1,this._directionLineShape.active=!1}},{key:"setSplineNode",value:function(i,e){this._splineNode=e,this._node=i,this.adjustControllerSize(),this.shape.setWorldPosition(h(i,this._splineNode.position)),this.directionNode.setWorldPosition(h(i,this._splineNode.direction)),this.invDirectionNode.setWorldPosition(h(i,this._splineNode.invDirection)),this.updateLineMesh(),this.updateController()}},{key:"updateLineMesh",value:function(){this._directionLineShape.updatePoints([this.directionNode.position,this.invDirectionNode.position])}},{key:"getSplineNodeWorldPosition",value:function(){return this.positionNode.getWorldPosition(cc.v3())}},{key:"getSplineNodeWorldDirection",value:function(){return this.directionNode.getWorldPosition(cc.v3())}},{key:"getSplineNodeWorldInvDirection",value:function(){return this.invDirectionNode.getWorldPosition(cc.v3())}}]),e}(a),c._RF.pop(),i("default",p)}}}));

System.register("chunks:///spline/src/editor/spline-gizmo.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc","../spline-node.js","../utils/pool.js","../spline.js","./utils.js","./base/gizmo.js","./continuous-line-controller.js","./types.js","./spline-node-controller.js"],(function(e,n){var o,t,i,r,s,l,d,p,u,h,a,c,v,C,f,g,m,N,S;return{setters:[function(e){o=e.inherits,t=e.classCallCheck,i=e.possibleConstructorReturn,r=e.getPrototypeOf,s=e.createClass},function(e){l=e.cclegacy,d=e.Vec3},function(e){p=e.default},function(e){u=e.default},function(e){h=e.default},function(e){a=e.getNodeWorldPostion,c=e.getNodeLocalPostion},function(e){v=e.default},function(e){C=e.default},function(e){f=e.SplineMoveType},function(e){g=e.default}],execute:function(){l._RF.push({},"646b1jdVAhEjYOaHNzLi1SR","spline-gizmo",void 0),CC_EDITOR&&(m=function(e,n){for(var o=e;o;){var t=o.getComponent(n);if(t)return t;o=o.parent}return null},N=new d,S=function(e){function n(){var e,o;t(this,n);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return(o=i(this,(e=r(n)).call.apply(e,[this].concat(l)))).moveTarget=null,o.moveType=f.None,o.splineNodeControllers=[],o.moveController=null,o.splineLineController=null,o.currentSplineNodeController=null,o}return o(n,e),s(n,[{key:"init",value:function(){this.moveController=this.createMoveController(),this.splineLineController=this.createSplineLineController(),this.onSplineNodesUpdate=this.onSplineNodesUpdate.bind(this),this.onSplineCurvesUpdate=this.onSplineCurvesUpdate.bind(this)}},{key:"updateControllerTransform",value:function(){for(var e=this.spline.node,n=this.splineNodes,o=this.splineNodeControllers,t=0;t<n.length;t++){var i=n[t];o[t]||(o[t]=this.createSplineNodeController(t)),o[t].setSplineNode(e,i)}this.onSplineCurvesUpdate()}},{key:"onSplineNodesUpdate",value:function(){for(var e=this.splineNodes,n=this.splineNodeControllers,o=0;o<e.length;o++)n[o]||(n[o]=this.createSplineNodeController(o)),n[o].show();for(var t=e.length;t<n.length;t++)n[t].hide()}},{key:"onSplineCurvesUpdate",value:function(){for(var e=this.splineCurves,n=[],o=this.spline.node,t=0;t<e.length;t++)for(var i=e[t].getSamples(),r=0;r<i.length;r++){var s=i[r];n.push(a(o,s.location,u.Vec3.get()))}this.splineLineController.updatePoints(n);for(var l=0;l<n.length;l++)u.Vec3.put(n[l])}},{key:"onShow",value:function(){for(var e=this.spline.node,n=this.splineNodes,o=this.splineNodeControllers,t=0;t<o.length;t++)t<n.length?(o[t].show(),o[t].setSplineNode(e,n[t])):o[t].hide();this.splineLineController.show(),this.moveController.hide(),this.updateControllerTransform(),this.spline.nodeListChanged.addListener(this.onSplineNodesUpdate),this.spline.curveChanged.addListener(this.onSplineCurvesUpdate),this.onSplineNodesUpdate(),this.onSplineCurvesUpdate(),this.registerCameraMovedEvent(),this.target instanceof p?this.selectIndex(this.splineNodes.indexOf(this.target),f.Position):this.selectIndex(-1,f.Node)}},{key:"onHide",value:function(){for(var e=this.splineNodeControllers,n=0;n<e.length;n++)e[n].hide();this.moveController.hide(),this.splineLineController.hide(),this.currentSelectionIsSpline||this.showTransformGizmo(!0),this.spline.nodeListChanged.removeListener(this.onSplineNodesUpdate),this.spline.curveChanged.removeListener(this.onSplineCurvesUpdate),this.spline.currentSelection=null,this.unregisterCameraMoveEvent()}},{key:"onEditorCameraMoved",value:function(){this.updateMoveControllderPos()}},{key:"updateMoveControllderPos",value:function(){if(this.moveType===f.Node)this.moveController.setPosition(this.spline.node.getWorldPosition(N));else{if(!this.currentSplineNodeController)return;this.moveType===f.Position?this.moveController.setPosition(this.currentSplineNodeController.getSplineNodeWorldPosition()):this.moveType===f.Direction?this.moveController.setPosition(this.currentSplineNodeController.getSplineNodeWorldDirection()):this.moveType===f.InvDirection&&this.moveController.setPosition(this.currentSplineNodeController.getSplineNodeWorldInvDirection())}}},{key:"selectIndex",value:function(e,n){this.currentSplineNodeController&&(this.currentSplineNodeController.hideDirection(),this.currentSplineNodeController=null);var o=this.splineNodes[e],t=this.splineNodeControllers[e];n!==f.Node&&(o&&t||(cc.warn("Can not select spline index ".concat(e)),n=f.Node)),this.moveType=n,n===f.Node?(this.spline.currentSelection=null,this.moveTarget=this.spline.node):(this.spline.currentSelection=o,this.moveTarget=o,this.currentSplineNodeController=t,t.showDirection()),this.showTransformGizmo(!1),this.moveController.show(),this.updateMoveControllderPos()}},{key:"createSplineNodeController",value:function(e){var n=this,o=new g(this.getGizmoRoot());return o.onControllerMouseDown=function(o){n.selectIndex(e,o.axisName)},o.onControllerMouseMove=function(){},o.onControllerMouseUp=function(){},o}},{key:"createMoveController",value:function(){var e=this,n=new window.cce.gizmos.PositionController(this.getGizmoRoot());return n.onControllerMouseDown=function(){e.spline.gizmoEditing=!0},n.onControllerMouseMove=function(){if(n.updated){e.recordChanges();var o=n.getPosition(),t=e.spline.node,i=e.moveTarget;if(e.moveType===f.Node)t.setWorldPosition(o);else{var r=c(t,o);e.moveType===f.Position?(i.direction=i.direction.clone().add(r).subtract(i.position),i.position=r):e.moveType===f.Direction?i.direction=r:e.moveType===f.InvDirection&&(i.invDirection=r),e.commitNodeChanged(i.node)}e.updateControllerTransform(),e.onComponentChanged(t)}},n.onControllerMouseUp=function(){e.spline.gizmoEditing=!1,n.updated&&(e.spline.updateAfterCurveChanged(),e.commitChanges())},n}},{key:"createSplineLineController",value:function(){return new C(this.getGizmoRoot())}},{key:"spline",get:function(){return this.target instanceof p?m(this.target.node,h):this.target}},{key:"splineNodes",get:function(){return this.spline.nodes}},{key:"splineCurves",get:function(){return this.spline.curves}},{key:"currentSelectionIsSpline",get:function(){var e=this.getTransformGizmoNode();return e&&(e.getComponent(h)||e.getComponent(p))}}]),n}(v),v.register("spline",S),v.register("SplineNode",S)),l._RF.pop()}}}));

System.register("chunks:///spline/src/spline-curve-interface.js",["cc"],(function(e,c){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f52bdvdp09JvYK1DHZuLYtH","spline-curve-interface",void 0),n._RF.pop()}}}));

System.register("chunks:///spline/src/spline-smoother.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./utils/pool.js","./spline.js"],(function(e,t){var n,i,o,s,r,l,a,h,d,c,u,p,g,v,m,f,_,y,C,N,b,L;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,o=e.createClass,s=e.classCallCheck,r=e.possibleConstructorReturn,l=e.getPrototypeOf,a=e.initializerDefineProperty,h=e.assertThisInitialized},function(e){d=e.cclegacy,c=e._decorator,u=e.Vec3,p=e.Component},function(e){g=e.default},function(e){v=e.default}],execute:function(){d._RF.push({},"f4722OckFpGqb0dQB+UAi/S","spline-smoother",void 0),N=c.ccclass,b=c.property,L=c.executeInEditMode,e("splineSmoother",(m=N("splineSmoother"),f=b({step:.1}),m(_=L((C=n((y=function(e){function t(){var e;return s(this,t),(e=r(this,l(t).call(this)))._smoothing=!1,e._spline=null,a(e,"_curvature",C,h(e)),e.splineNodeListChanged=e.splineNodeListChanged.bind(h(e)),e.onNodeChanged=e.onNodeChanged.bind(h(e)),e}return i(t,e),o(t,[{key:"spline",get:function(){return this._spline||(this._spline=this.getComponent(v)),this._spline}},{key:"curvature",get:function(){return this._curvature},set:function(e){this._curvature=e,this.smoothAll()}}]),o(t,[{key:"onEnable",value:function(){this.smoothAll(),this.spline.nodeListChanged.addListener(this.splineNodeListChanged);for(var e=0;e<this.spline.nodes.length;e++)this.spline.nodes[e].changed.addListener(this.onNodeChanged)}},{key:"onDisable",value:function(){this.spline.nodeListChanged.removeListener(this.splineNodeListChanged);for(var e=0;e<this.spline.nodes.length;e++)this.spline.nodes[e].changed.removeListener(this.onNodeChanged)}},{key:"splineNodeListChanged",value:function(e){if(null!=e.newItems)for(var t=0;t<e.newItems.length;t++)e.newItems[t].changed.addListener(this.onNodeChanged);if(null!=e.removedItems)for(var n=0;n<e.removedItems.length;n++)e.removedItems[n].changed.removeListener(this.onNodeChanged)}},{key:"onNodeChanged",value:function(e){this.smoothNode(e);var t=this.spline.nodes,n=t.indexOf(e);n>0&&this.smoothNode(t[n-1]),n<t.length-1&&this.smoothNode(t[n+1])}},{key:"smoothNode",value:function(e){if(!this._smoothing){this._smoothing=!0;var t=this.spline.nodes,n=t.indexOf(e),i=e.position,o=g.Vec3.get().set(u.ZERO),s=g.Vec3.get(),r=0;if(0!==n){var l=t[n-1].position,a=s.set(i).subtract(l);r+=a.length(),o.add(a.normalize())}if(n!=t.length-1){var h=t[n+1].position,d=s.set(i).subtract(h);r+=d.length(),o.subtract(d.normalize())}r*=.5;var c=(o=o.normalize().multiplyScalar(r*this.curvature)).add(i);e.direction=c,g.Vec3.put(o),g.Vec3.put(s),this._smoothing=!1}}},{key:"smoothAll",value:function(){for(var e=this.spline.nodes,t=0;t<e.length;t++)this.smoothNode(e[t])}}]),t}(p)).prototype,"_curvature",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),n(y.prototype,"curvature",[f],Object.getOwnPropertyDescriptor(y.prototype,"curvature"),y.prototype),_=y))||_)||_)),d._RF.pop()}}}));

System.register("chunks:///spline/src/utils/mesh-processing/mesh-tesselate.js",["cc","./mesh-vertex.js"],(function(e,t){var n,r,s,o,u,i;function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,i=u.pool.get();return r.lerp(i.position,e.position,t.position,n),r.lerp(i.normal,e.normal,t.normal,n),s.lerp(i.tangent,e.tangent,t.tangent,n),o.lerp(i.uv,e.uv,t.uv,n),i}function a(e,t){for(var n=0;n<t.length;n++)if(t[n].position.equals(e.position))return n;return t.push(e)-1}return{setters:[function(e){n=e.cclegacy,r=e.Vec3,s=e.Vec4,o=e.Vec2},function(e){u=e.default}],execute:function(){n._RF.push({},"bf32f8QiGBM0pOS/xpwz1v6","mesh-tesselate",void 0),i={tessellate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n+=1;for(var r=[],s=function(t,n,r){return a(l(e[t],e[n],r),e)},o=0,u=t.length;o<u;o+=3){var i=t[o],p=t[o+1],c=t[o+2],f=s(i,p,1/n),v=s(i,c,1/n);r.push(i,f,v);for(var h=1;h<n;++h)for(var g=s(i,p,(h+1)/n),m=s(i,c,(h+1)/n),d=0;d<=h;++d)r.push(s(f,v,d/h),s(g,m,d/(h+1)),s(g,m,(d+1)/(h+1))),d<h&&r.push(s(f,v,d/h),s(g,m,(d+1)/(h+1)),s(f,v,(d+1)/h))}return r}},n._RF.pop(),e("default",i)}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../main-menu/scripts/scenelist.js","../main-menu/scripts/backbutton.js","../main-menu/scripts/listitem.js","../spline/src/utils/event.js","../spline/src/spline-node.js","../spline/src/utils/mathf.js","../spline/src/utils/pool.js","../spline/src/utils/mesh-processing/mesh-vertex.js","../spline/src/curve-sample.js","../spline/src/cubic-bezier-curve.js","../spline/src/spline-node-wrapper.js","../spline/src/spline.js","../spline/src/comps/spline-util-base.js","../spline/src/comps/spline-util-renderer.js","../road-tool/src/road-tool.js","../shader-lib/post-process/editor/post-process-renderer-materials.js","../shader-lib/post-process/post-process-command.js","../shader-lib/post-process/post-process-flow.js","../shader-lib/post-process/post-process-renderer.js","../shader-lib/post-process/post-process-stage.js","../shader-lib/post-process/post-process.js","../spline/src/utils/mesh-processing/mesh-utility.js","../spline/src/utils/mesh-processing/mesh-bender.js","../spline/src/utils/mesh-processing/source-mesh.js","../spline/src/utils/animation-curve.js","../spline/src/comps/mesh-tiling.js","../spline/examples/src/follow-path-mesh.js","../spline/examples/src/follow-path-object.js","../spline/examples/src/spline-examples-ui.js","../spline/src/utils/mesh-processing/fixed-buffer.js","../spline/src/utils/mesh-processing/fixed-model-mesh.js","../spline/src/comps/type.js","../spline/src/comps/scatter/scatter-item.js","../spline/src/comps/scatter/scatter-volume.js","../spline/src/utils/raycast.js","../spline/src/editor/asset-operation.js","../spline/src/comps/scatter/scatter.js","../spline/src/comps/sower.js","../spline/src/editor/utils.js","../spline/src/comps/terrain/terrain-sculpt.js","../spline/src/editor/base/controller.js","../spline/src/editor/base/gizmo.js","../spline/src/editor/continuous-line-controller.js","../spline/src/editor/types.js","../spline/src/editor/spline-node-controller.js","../spline/src/editor/spline-gizmo.js","../spline/src/spline-curve-interface.js","../spline/src/spline-smoother.js","../spline/src/utils/mesh-processing/mesh-tesselate.js"],(function(s,n){return{setters:[function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/main-menu/scripts/scenelist.js', 'chunks:///main-menu/scripts/scenelist.js');
  r('project:///assets/main-menu/scripts/backbutton.js', 'chunks:///main-menu/scripts/backbutton.js');
  r('project:///assets/main-menu/scripts/listitem.js', 'chunks:///main-menu/scripts/listitem.js');
  r('project:///assets/spline/src/utils/event.js', 'chunks:///spline/src/utils/event.js');
  r('project:///assets/spline/src/spline-node.js', 'chunks:///spline/src/spline-node.js');
  r('project:///assets/spline/src/utils/mathf.js', 'chunks:///spline/src/utils/mathf.js');
  r('project:///assets/spline/src/utils/pool.js', 'chunks:///spline/src/utils/pool.js');
  r('project:///assets/spline/src/utils/mesh-processing/mesh-vertex.js', 'chunks:///spline/src/utils/mesh-processing/mesh-vertex.js');
  r('project:///assets/spline/src/curve-sample.js', 'chunks:///spline/src/curve-sample.js');
  r('project:///assets/spline/src/cubic-bezier-curve.js', 'chunks:///spline/src/cubic-bezier-curve.js');
  r('project:///assets/spline/src/spline-node-wrapper.js', 'chunks:///spline/src/spline-node-wrapper.js');
  r('project:///assets/spline/src/spline.js', 'chunks:///spline/src/spline.js');
  r('project:///assets/spline/src/comps/spline-util-base.js', 'chunks:///spline/src/comps/spline-util-base.js');
  r('project:///assets/spline/src/comps/spline-util-renderer.js', 'chunks:///spline/src/comps/spline-util-renderer.js');
  r('project:///assets/road-tool/src/road-tool.js', 'chunks:///road-tool/src/road-tool.js');
  r('project:///assets/shader-lib/post-process/editor/post-process-renderer-materials.js', 'chunks:///shader-lib/post-process/editor/post-process-renderer-materials.js');
  r('project:///assets/shader-lib/post-process/post-process-command.js', 'chunks:///shader-lib/post-process/post-process-command.js');
  r('project:///assets/shader-lib/post-process/post-process-flow.js', 'chunks:///shader-lib/post-process/post-process-flow.js');
  r('project:///assets/shader-lib/post-process/post-process-renderer.js', 'chunks:///shader-lib/post-process/post-process-renderer.js');
  r('project:///assets/shader-lib/post-process/post-process-stage.js', 'chunks:///shader-lib/post-process/post-process-stage.js');
  r('project:///assets/shader-lib/post-process/post-process.js', 'chunks:///shader-lib/post-process/post-process.js');
  r('project:///assets/spline/src/utils/mesh-processing/mesh-utility.js', 'chunks:///spline/src/utils/mesh-processing/mesh-utility.js');
  r('project:///assets/spline/src/utils/mesh-processing/mesh-bender.js', 'chunks:///spline/src/utils/mesh-processing/mesh-bender.js');
  r('project:///assets/spline/src/utils/mesh-processing/source-mesh.js', 'chunks:///spline/src/utils/mesh-processing/source-mesh.js');
  r('project:///assets/spline/src/utils/animation-curve.js', 'chunks:///spline/src/utils/animation-curve.js');
  r('project:///assets/spline/src/comps/mesh-tiling.js', 'chunks:///spline/src/comps/mesh-tiling.js');
  r('project:///assets/spline/examples/src/follow-path-mesh.js', 'chunks:///spline/examples/src/follow-path-mesh.js');
  r('project:///assets/spline/examples/src/follow-path-object.js', 'chunks:///spline/examples/src/follow-path-object.js');
  r('project:///assets/spline/examples/src/spline-examples-ui.js', 'chunks:///spline/examples/src/spline-examples-ui.js');
  r('project:///assets/spline/src/utils/mesh-processing/fixed-buffer.js', 'chunks:///spline/src/utils/mesh-processing/fixed-buffer.js');
  r('project:///assets/spline/src/utils/mesh-processing/fixed-model-mesh.js', 'chunks:///spline/src/utils/mesh-processing/fixed-model-mesh.js');
  r('project:///assets/spline/src/comps/type.js', 'chunks:///spline/src/comps/type.js');
  r('project:///assets/spline/src/comps/scatter/scatter-item.js', 'chunks:///spline/src/comps/scatter/scatter-item.js');
  r('project:///assets/spline/src/comps/scatter/scatter-volume.js', 'chunks:///spline/src/comps/scatter/scatter-volume.js');
  r('project:///assets/spline/src/utils/raycast.js', 'chunks:///spline/src/utils/raycast.js');
  r('project:///assets/spline/src/editor/asset-operation.js', 'chunks:///spline/src/editor/asset-operation.js');
  r('project:///assets/spline/src/comps/scatter/scatter.js', 'chunks:///spline/src/comps/scatter/scatter.js');
  r('project:///assets/spline/src/comps/sower.js', 'chunks:///spline/src/comps/sower.js');
  r('project:///assets/spline/src/editor/utils.js', 'chunks:///spline/src/editor/utils.js');
  r('project:///assets/spline/src/comps/terrain/terrain-sculpt.js', 'chunks:///spline/src/comps/terrain/terrain-sculpt.js');
  r('project:///assets/spline/src/editor/base/controller.js', 'chunks:///spline/src/editor/base/controller.js');
  r('project:///assets/spline/src/editor/base/gizmo.js', 'chunks:///spline/src/editor/base/gizmo.js');
  r('project:///assets/spline/src/editor/continuous-line-controller.js', 'chunks:///spline/src/editor/continuous-line-controller.js');
  r('project:///assets/spline/src/editor/types.js', 'chunks:///spline/src/editor/types.js');
  r('project:///assets/spline/src/editor/spline-node-controller.js', 'chunks:///spline/src/editor/spline-node-controller.js');
  r('project:///assets/spline/src/editor/spline-gizmo.js', 'chunks:///spline/src/editor/spline-gizmo.js');
  r('project:///assets/spline/src/spline-curve-interface.js', 'chunks:///spline/src/spline-curve-interface.js');
  r('project:///assets/spline/src/spline-smoother.js', 'chunks:///spline/src/spline-smoother.js');
  r('project:///assets/spline/src/utils/mesh-processing/mesh-tesselate.js', 'chunks:///spline/src/utils/mesh-processing/mesh-tesselate.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});